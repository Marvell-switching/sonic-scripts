From 1eb75741c098fadc6d93d3c41f55b870ad7ad155 Mon Sep 17 00:00:00 2001
From: Yan Markman <ymarkman@marvell.com>
Date: Mon, 20 Oct 2025 17:23:08 +0300
Subject: [PATCH 1/1] db98cx8580 init: rmmod kempld

Signed-off-by: Yan Markman <ymarkman@marvell.com>
---
 db98cx8580-32cd/scripts/db98cx8580-32cd-init.sh | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/db98cx8580-32cd/scripts/db98cx8580-32cd-init.sh b/db98cx8580-32cd/scripts/db98cx8580-32cd-init.sh
index 344731b..e43ad33 100644
--- a/db98cx8580-32cd/scripts/db98cx8580-32cd-init.sh
+++ b/db98cx8580-32cd/scripts/db98cx8580-32cd-init.sh
@@ -17,4 +17,9 @@ echo optoe2 0x50 > /sys/bus/i2c/devices/i2c-2/new_device
 # Disable BIOS ACPI interrupt
 echo disable > /sys/firmware/acpi/interrupts/gpe01
 
+# Remove Kontron kempld modules (causing starvation on i2c bus)
+rmmod i2c_kempld || true
+rmmod gpio_kempld || true
+rmmod kempld_core || true
+
 exit 0
-- 
2.34.1

