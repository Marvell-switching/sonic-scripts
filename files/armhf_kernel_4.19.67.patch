diff --git a/Makefile b/Makefile
index 9fe08c3..2c2a6f6 100644
--- a/Makefile
+++ b/Makefile
@@ -12,7 +12,11 @@ CONFIGURED_ARCH ?= amd64
 
 LINUX_HEADER_COMMON = linux-headers-$(KVERSION_SHORT)-common_$(KERNEL_VERSION)-$(KERNEL_SUBVERSION)_all.deb
 LINUX_HEADER_AMD64 = linux-headers-$(KVERSION)_$(KERNEL_VERSION)-$(KERNEL_SUBVERSION)_$(CONFIGURED_ARCH).deb
+ifeq ($(CONFIGURED_ARCH), armhf)
+LINUX_IMAGE = linux-image-$(KVERSION)_$(KERNEL_VERSION)-$(KERNEL_SUBVERSION)_$(CONFIGURED_ARCH).deb
+else
 LINUX_IMAGE = linux-image-$(KVERSION)-unsigned_$(KERNEL_VERSION)-$(KERNEL_SUBVERSION)_$(CONFIGURED_ARCH).deb
+endif
 
 MAIN_TARGET = $(LINUX_HEADER_COMMON)
 DERIVED_TARGETS = $(LINUX_HEADER_AMD64) $(LINUX_IMAGE)
diff --git a/patch/0100-armhf-build_workaround.patch b/patch/0100-armhf-build_workaround.patch
new file mode 100644
index 0000000..9bfaf82
--- /dev/null
+++ b/patch/0100-armhf-build_workaround.patch
@@ -0,0 +1,23 @@
+From a961464da6c88aee4d94af4038c748a1e8a1f412 Mon Sep 17 00:00:00 2001
+From: Antony Rheneus <arheneus@marvell.com>
+Date: Thu, 17 Oct 2019 18:57:48 +0530
+Subject: [PATCH] armhf debian ABI build workaround
+
+---
+ b/debian/bin/buildcheck.py | 2 ++
+ 1 file changed, 2 insertions(+), 0 deletions(-)
+
+diff --git a/debian/bin/buildcheck.py b/debian/bin/buildcheck.py
+index e997934..69288eb 100644
+--- a/debian/bin/buildcheck.py	2020-05-22 13:24:53.444763025 +0000
++++ b/debian/bin/buildcheck.py	2020-05-22 13:25:50.905764655 +0000
+@@ -82,6 +82,8 @@
+         if change_effective or remove_effective:
+             out.write("ABI has changed!  Refusing to continue.\n")
+             ret = 1
++            out.write("TO workaround, continuing for now\n")
++            ret = 0
+         elif change or remove:
+             out.write("ABI has changed but all changes have been ignored.  "
+                       "Continuing.\n")
+2.7.4
diff --git a/patch/0100-armhf-configs.patch b/patch/0100-armhf-configs.patch
new file mode 100644
index 0000000..38e695e
--- /dev/null
+++ b/patch/0100-armhf-configs.patch
@@ -0,0 +1,2156 @@
+From a961464da6c88aee4d94af4038c748a1e8a1f412 Mon Sep 17 00:00:00 2001
+From: Antony Rheneus <arheneus@marvell.com>
+Date: Thu, 17 Oct 2019 18:57:48 +0530
+Subject: [PATCH] armhf mandatory configs for boot
+
+---
+ debian/build/build_armhf_none_armmp/.config | 53 ++++++++++++++++-------------
+ 1 file changed, 30 insertions(+), 23 deletions(-)
+
+diff --git a/debian/build/build_armhf_none_armmp/.config b/debian/build/build_armhf_none_armmp/.config
+index e997934..69288eb 100644
+--- a/debian/build/build_armhf_none_armmp/.config
++++ b/debian/build/build_armhf_none_armmp/.config
+@@ -26,9 +26,9 @@
+ CONFIG_HAVE_KERNEL_XZ=y
+ CONFIG_HAVE_KERNEL_LZO=y
+ CONFIG_HAVE_KERNEL_LZ4=y
+-# CONFIG_KERNEL_GZIP is not set
++CONFIG_KERNEL_GZIP=y
+ # CONFIG_KERNEL_LZMA is not set
+-CONFIG_KERNEL_XZ=y
++# CONFIG_KERNEL_XZ is not set
+ # CONFIG_KERNEL_LZO is not set
+ # CONFIG_KERNEL_LZ4 is not set
+ CONFIG_DEFAULT_HOSTNAME="(none)"
+@@ -74,9 +74,8 @@
+ # Timers subsystem
+ #
+ CONFIG_TICK_ONESHOT=y
+-CONFIG_NO_HZ_COMMON=y
+-# CONFIG_HZ_PERIODIC is not set
+-CONFIG_NO_HZ_IDLE=y
++CONFIG_HZ_PERIODIC=y
++# CONFIG_NO_HZ_IDLE is not set
+ # CONFIG_NO_HZ_FULL is not set
+ # CONFIG_NO_HZ is not set
+ CONFIG_HIGH_RES_TIMERS=y
+@@ -204,37 +203,28 @@
+ CONFIG_PERF_EVENTS=y
+ # CONFIG_DEBUG_PERF_USE_VMALLOC is not set
+ CONFIG_VM_EVENT_COUNTERS=y
+-CONFIG_SLUB_DEBUG=y
+-# CONFIG_SLUB_MEMCG_SYSFS_ON is not set
+-# CONFIG_COMPAT_BRK is not set
+-# CONFIG_SLAB is not set
+-CONFIG_SLUB=y
++CONFIG_COMPAT_BRK=y
++CONFIG_SLAB=y
++# CONFIG_SLUB is not set
+ # CONFIG_SLOB is not set
+ CONFIG_SLAB_MERGE_DEFAULT=y
+ CONFIG_SLAB_FREELIST_RANDOM=y
+-CONFIG_SLAB_FREELIST_HARDENED=y
+-CONFIG_SLUB_CPU_PARTIAL=y
+ CONFIG_SYSTEM_DATA_VERIFICATION=y
+ CONFIG_PROFILING=y
+ CONFIG_TRACEPOINTS=y
+ CONFIG_ARM=y
+ CONFIG_ARM_HAS_SG_CHAIN=y
+-CONFIG_ARM_DMA_USE_IOMMU=y
+-CONFIG_ARM_DMA_IOMMU_ALIGNMENT=8
+ CONFIG_MIGHT_HAVE_PCI=y
+ CONFIG_SYS_SUPPORTS_APM_EMULATION=y
+ CONFIG_HAVE_PROC_CPU=y
+-CONFIG_NO_IOPORT_MAP=y
+ CONFIG_STACKTRACE_SUPPORT=y
+ CONFIG_LOCKDEP_SUPPORT=y
+ CONFIG_TRACE_IRQFLAGS_SUPPORT=y
+ CONFIG_RWSEM_XCHGADD_ALGORITHM=y
+-CONFIG_ARCH_HAS_BANDGAP=y
+ CONFIG_FIX_EARLYCON_MEM=y
+ CONFIG_GENERIC_HWEIGHT=y
+ CONFIG_GENERIC_CALIBRATE_DELAY=y
+ CONFIG_ARCH_SUPPORTS_UPROBES=y
+-CONFIG_FIQ=y
+ CONFIG_ARM_PATCH_PHYS_VIRT=y
+ CONFIG_GENERIC_BUG=y
+ CONFIG_PGTABLE_LEVELS=2
+@@ -275,106 +265,21 @@
+ # CONFIG_ARCH_MULTI_V6 is not set
+ CONFIG_ARCH_MULTI_V7=y
+ CONFIG_ARCH_MULTI_V6_V7=y
+-CONFIG_ARCH_VIRT=y
++# CONFIG_ARCH_VIRT is not set
+ # CONFIG_ARCH_ACTIONS is not set
+ # CONFIG_ARCH_ALPINE is not set
+ # CONFIG_ARCH_ARTPEC is not set
+ # CONFIG_ARCH_AT91 is not set
+-CONFIG_ARCH_BCM=y
+-
+-#
+-# IPROC architected SoCs
+-#
+-# CONFIG_ARCH_BCM_CYGNUS is not set
+-# CONFIG_ARCH_BCM_HR2 is not set
+-# CONFIG_ARCH_BCM_NSP is not set
+-# CONFIG_ARCH_BCM_5301X is not set
+-
+-#
+-# KONA architected SoCs
+-#
+-# CONFIG_ARCH_BCM_281XX is not set
+-# CONFIG_ARCH_BCM_21664 is not set
+-# CONFIG_ARCH_BCM_23550 is not set
+-
+-#
+-# Other Architectures
+-#
+-CONFIG_ARCH_BCM2835=y
+-# CONFIG_ARCH_BCM_53573 is not set
+-# CONFIG_ARCH_BCM_63XX is not set
+-# CONFIG_ARCH_BRCMSTB is not set
++# CONFIG_ARCH_BCM is not set
+ # CONFIG_ARCH_BERLIN is not set
+ # CONFIG_ARCH_DIGICOLOR is not set
+-CONFIG_ARCH_EXYNOS=y
+-CONFIG_S5P_DEV_MFC=y
+-# CONFIG_ARCH_EXYNOS3 is not set
+-CONFIG_ARCH_EXYNOS4=y
+-CONFIG_ARCH_EXYNOS5=y
+-
+-#
+-# EXYNOS SoCs
+-#
+-CONFIG_CPU_EXYNOS4210=y
+-CONFIG_SOC_EXYNOS4412=y
+-CONFIG_SOC_EXYNOS5250=y
+-CONFIG_SOC_EXYNOS5260=y
+-CONFIG_SOC_EXYNOS5410=y
+-CONFIG_SOC_EXYNOS5420=y
+-CONFIG_SOC_EXYNOS5800=y
+-CONFIG_EXYNOS5420_MCPM=y
+-CONFIG_EXYNOS_CPU_SUSPEND=y
+-CONFIG_PLAT_SAMSUNG=y
+-
+-#
+-# Samsung Common options
+-#
+-
+-#
+-# Boot options
+-#
+-
+-#
+-# Power management
+-#
+-CONFIG_ARCH_HIGHBANK=y
++# CONFIG_ARCH_EXYNOS is not set
++# CONFIG_ARCH_HIGHBANK is not set
+ # CONFIG_ARCH_HISI is not set
+-CONFIG_ARCH_MXC=y
+-CONFIG_MXC_TZIC=y
+-CONFIG_HAVE_IMX_ANATOP=y
+-CONFIG_HAVE_IMX_GPC=y
+-CONFIG_HAVE_IMX_MMDC=y
+-CONFIG_HAVE_IMX_SRC=y
+-
+-#
+-# Device tree only
+-#
+-
+-#
+-# Cortex-A platforms
+-#
+-CONFIG_SOC_IMX5=y
+-# CONFIG_SOC_IMX50 is not set
+-CONFIG_SOC_IMX51=y
+-CONFIG_SOC_IMX53=y
+-CONFIG_SOC_IMX6=y
+-CONFIG_SOC_IMX6Q=y
+-CONFIG_SOC_IMX6SL=y
+-CONFIG_SOC_IMX6SLL=y
+-CONFIG_SOC_IMX6SX=y
+-CONFIG_SOC_IMX6UL=y
+-# CONFIG_SOC_LS1021A is not set
+-
+-#
+-# Cortex-A/Cortex-M asymmetric multiprocessing platforms
+-#
+-# CONFIG_SOC_IMX7D is not set
+-# CONFIG_SOC_VF610 is not set
++# CONFIG_ARCH_MXC is not set
+ # CONFIG_ARCH_KEYSTONE is not set
+ # CONFIG_ARCH_MEDIATEK is not set
+-CONFIG_ARCH_MESON=y
+-CONFIG_MACH_MESON6=y
+-CONFIG_MACH_MESON8=y
++# CONFIG_ARCH_MESON is not set
+ # CONFIG_ARCH_MMP is not set
+ CONFIG_ARCH_MVEBU=y
+ CONFIG_MACH_MVEBU_ANY=y
+@@ -386,92 +291,36 @@
+ CONFIG_MACH_ARMADA_XP=y
+ CONFIG_MACH_DOVE=y
+ # CONFIG_ARCH_NPCM is not set
+-CONFIG_ARCH_OMAP=y
+-
+-#
+-# TI OMAP Common Features
+-#
+-
+-#
+-# OMAP Feature Selections
+-#
+-CONFIG_POWER_AVS_OMAP=y
+-CONFIG_POWER_AVS_OMAP_CLASS3=y
+-CONFIG_OMAP_RESET_CLOCKS=y
+-CONFIG_OMAP_32K_TIMER=y
+-# CONFIG_OMAP3_L2_AUX_SECURE_SAVE_RESTORE is not set
+-CONFIG_MACH_OMAP_GENERIC=y
+ 
+ #
+ # TI OMAP/AM/DM/DRA Family
+ #
+-CONFIG_ARCH_OMAP3=y
+-CONFIG_ARCH_OMAP4=y
+-CONFIG_SOC_OMAP5=y
+-CONFIG_SOC_AM33XX=y
++# CONFIG_ARCH_OMAP3 is not set
++# CONFIG_ARCH_OMAP4 is not set
++# CONFIG_SOC_OMAP5 is not set
++# CONFIG_SOC_AM33XX is not set
+ # CONFIG_SOC_AM43XX is not set
+-CONFIG_SOC_DRA7XX=y
+-CONFIG_ARCH_OMAP2PLUS=y
+-CONFIG_OMAP_INTERCONNECT_BARRIER=y
+-
+-#
+-# TI OMAP2/3/4 Specific Features
+-#
+-CONFIG_ARCH_OMAP2PLUS_TYPICAL=y
+-CONFIG_SOC_HAS_OMAP2_SDRC=y
+-CONFIG_SOC_HAS_REALTIME_COUNTER=y
+-CONFIG_SOC_OMAP3430=y
+-CONFIG_SOC_TI81XX=y
+-CONFIG_OMAP_PACKAGE_CBB=y
+-
+-#
+-# OMAP Legacy Platform Data Board Type
+-#
+-CONFIG_MACH_OMAP3517EVM=y
+-CONFIG_MACH_OMAP3_PANDORA=y
+-# CONFIG_OMAP3_SDRC_AC_TIMING is not set
+-# CONFIG_OMAP5_ERRATA_801819 is not set
++# CONFIG_SOC_DRA7XX is not set
+ # CONFIG_ARCH_SIRF is not set
+ # CONFIG_ARCH_QCOM is not set
+ # CONFIG_ARCH_REALVIEW is not set
+-CONFIG_ARCH_ROCKCHIP=y
++# CONFIG_ARCH_ROCKCHIP is not set
+ # CONFIG_ARCH_S5PV210 is not set
+ # CONFIG_ARCH_RENESAS is not set
+-CONFIG_ARCH_SOCFPGA=y
+-# CONFIG_SOCFPGA_SUSPEND is not set
++# CONFIG_ARCH_SOCFPGA is not set
+ # CONFIG_PLAT_SPEAR is not set
+ # CONFIG_ARCH_STI is not set
+ # CONFIG_ARCH_STM32 is not set
+-CONFIG_ARCH_SUNXI=y
+-CONFIG_MACH_SUN4I=y
+-CONFIG_MACH_SUN5I=y
+-CONFIG_MACH_SUN6I=y
+-CONFIG_MACH_SUN7I=y
+-CONFIG_MACH_SUN8I=y
+-CONFIG_MACH_SUN9I=y
+-CONFIG_ARCH_SUNXI_MC_SMP=y
++# CONFIG_ARCH_SUNXI is not set
+ # CONFIG_ARCH_TANGO is not set
+-CONFIG_ARCH_TEGRA=y
++# CONFIG_ARCH_TEGRA is not set
+ # CONFIG_ARCH_UNIPHIER is not set
+ # CONFIG_ARCH_U8500 is not set
+-CONFIG_ARCH_VEXPRESS=y
+-CONFIG_ARCH_VEXPRESS_CORTEX_A5_A9_ERRATA=y
+-# CONFIG_ARCH_VEXPRESS_DCSCB is not set
+-# CONFIG_ARCH_VEXPRESS_SPC is not set
+-# CONFIG_ARCH_VEXPRESS_TC2_PM is not set
+-CONFIG_ARCH_VT8500=y
+-CONFIG_ARCH_WM8850=y
++# CONFIG_ARCH_VEXPRESS is not set
++# CONFIG_ARCH_WM8850 is not set
+ # CONFIG_ARCH_ZX is not set
+ # CONFIG_ARCH_ZYNQ is not set
+ CONFIG_PLAT_ORION=y
+-CONFIG_PLAT_VERSATILE=y
+-CONFIG_ARCH_SUPPORTS_FIRMWARE=y
+-CONFIG_ARCH_SUPPORTS_TRUSTED_FOUNDATIONS=y
+-
+-#
+-# Firmware options
+-#
+-CONFIG_TRUSTED_FOUNDATIONS=y
+ 
+ #
+ # Processor Type
+@@ -571,7 +420,6 @@
+ # CONFIG_PCI_IOV is not set
+ # CONFIG_PCI_PRI is not set
+ # CONFIG_PCI_PASID is not set
+-CONFIG_PCI_LABEL=y
+ # CONFIG_HOTPLUG_PCI is not set
+ 
+ #
+@@ -584,23 +432,16 @@
+ #
+ # CONFIG_PCIE_CADENCE_HOST is not set
+ # CONFIG_PCI_FTPCI100 is not set
+-CONFIG_PCI_TEGRA=y
+ CONFIG_PCI_HOST_COMMON=y
+ CONFIG_PCI_HOST_GENERIC=y
+ # CONFIG_PCIE_XILINX is not set
+ # CONFIG_PCI_V3_SEMI is not set
+ # CONFIG_PCIE_ALTERA is not set
+-# CONFIG_PCIE_ROCKCHIP_HOST is not set
+ 
+ #
+ # DesignWare PCI Core Support
+ #
+-CONFIG_PCIE_DW=y
+-CONFIG_PCIE_DW_HOST=y
+-CONFIG_PCI_DRA7XX=y
+-CONFIG_PCI_DRA7XX_HOST=y
+ # CONFIG_PCIE_DW_PLAT_HOST is not set
+-CONFIG_PCI_IMX6=y
+ # CONFIG_PCI_LAYERSCAPE is not set
+ # CONFIG_PCIE_ARMADA_8K is not set
+ 
+@@ -637,21 +478,20 @@
+ CONFIG_NR_CPUS=8
+ CONFIG_HOTPLUG_CPU=y
+ CONFIG_ARM_PSCI=y
+-CONFIG_ARCH_NR_GPIO=2048
++CONFIG_ARCH_NR_GPIO=0
+ CONFIG_HZ_FIXED=0
+-# CONFIG_HZ_100 is not set
++CONFIG_HZ_100=y
+ # CONFIG_HZ_200 is not set
+-CONFIG_HZ_250=y
++# CONFIG_HZ_250 is not set
+ # CONFIG_HZ_300 is not set
+ # CONFIG_HZ_500 is not set
+ # CONFIG_HZ_1000 is not set
+-CONFIG_HZ=250
++CONFIG_HZ=100
+ CONFIG_SCHED_HRTICK=y
+ # CONFIG_THUMB2_KERNEL is not set
+ CONFIG_ARM_PATCH_IDIV=y
+ CONFIG_AEABI=y
+ # CONFIG_OABI_COMPAT is not set
+-CONFIG_ARCH_HAS_HOLES_MEMORYMODEL=y
+ CONFIG_HAVE_ARCH_PFN_VALID=y
+ CONFIG_HIGHMEM=y
+ CONFIG_HIGHPTE=y
+@@ -685,9 +525,7 @@
+ CONFIG_ATAGS_PROC=y
+ CONFIG_CRASH_DUMP=y
+ CONFIG_AUTO_ZRELADDR=y
+-CONFIG_EFI_STUB=y
+-CONFIG_EFI=y
+-CONFIG_DMI=y
++# CONFIG_EFI is not set
+ 
+ #
+ # CPU Power Management
+@@ -720,19 +558,12 @@
+ CONFIG_CPUFREQ_DT_PLATDEV=y
+ # CONFIG_ARM_ARMADA_37XX_CPUFREQ is not set
+ # CONFIG_ARM_BIG_LITTLE_CPUFREQ is not set
+-CONFIG_ARM_HIGHBANK_CPUFREQ=m
+-CONFIG_ARM_IMX6Q_CPUFREQ=m
+-CONFIG_ARM_OMAP2PLUS_CPUFREQ=y
+-CONFIG_ARM_TEGRA20_CPUFREQ=y
+-CONFIG_ARM_TEGRA124_CPUFREQ=m
+-# CONFIG_ARM_TI_CPUFREQ is not set
+ # CONFIG_QORIQ_CPUFREQ is not set
+ 
+ #
+ # CPU Idle
+ #
+ # CONFIG_CPU_IDLE is not set
+-CONFIG_ARCH_NEEDS_CPU_IDLE_COUPLED=y
+ 
+ #
+ # Floating point emulation
+@@ -782,9 +613,7 @@
+ # CONFIG_ARM_SCMI_PROTOCOL is not set
+ # CONFIG_ARM_SCPI_PROTOCOL is not set
+ # CONFIG_FIRMWARE_MEMMAP is not set
+-CONFIG_DMIID=y
+-CONFIG_DMI_SYSFS=y
+-CONFIG_RASPBERRYPI_FIRMWARE=y
++# CONFIG_FW_CFG_SYSFS is not set
+ CONFIG_HAVE_ARM_SMCCC=y
+ CONFIG_GOOGLE_FIRMWARE=y
+ CONFIG_GOOGLE_COREBOOT_TABLE=m
+@@ -795,23 +624,8 @@
+ # CONFIG_GOOGLE_VPD is not set
+ 
+ #
+-# EFI (Extensible Firmware Interface) Support
+-#
+-CONFIG_EFI_VARS=m
+-CONFIG_EFI_ESRT=y
+-CONFIG_EFI_PARAMS_FROM_FDT=y
+-CONFIG_EFI_RUNTIME_WRAPPERS=y
+-CONFIG_EFI_ARMSTUB=y
+-CONFIG_EFI_ARMSTUB_DTB_LOADER=y
+-CONFIG_EFI_BOOTLOADER_CONTROL=m
+-CONFIG_EFI_CAPSULE_LOADER=m
+-# CONFIG_EFI_TEST is not set
+-# CONFIG_RESET_ATTACK_MITIGATION is not set
+-
+-#
+ # Tegra firmware driver
+ #
+-# CONFIG_TEGRA_IVC is not set
+ # CONFIG_ARM_CRYPTO is not set
+ # CONFIG_VIRTUALIZATION is not set
+ 
+@@ -1734,7 +1548,6 @@
+ CONFIG_CAN_CALC_BITTIMING=y
+ CONFIG_CAN_FLEXCAN=m
+ # CONFIG_CAN_GRCAN is not set
+-CONFIG_CAN_SUN4I=m
+ # CONFIG_CAN_TI_HECC is not set
+ # CONFIG_CAN_C_CAN is not set
+ # CONFIG_CAN_CC770 is not set
+@@ -1896,8 +1709,6 @@
+ #
+ # Device Drivers
+ #
+-CONFIG_ARM_AMBA=y
+-CONFIG_TEGRA_AHB=y
+ 
+ #
+ # Generic Driver Options
+@@ -1948,19 +1759,9 @@
+ #
+ # Bus devices
+ #
+-CONFIG_ARM_CCI=y
+-CONFIG_ARM_CCI400_COMMON=y
+-CONFIG_ARM_CCI400_PORT_CTRL=y
+ # CONFIG_BRCMSTB_GISB_ARB is not set
+-# CONFIG_IMX_WEIM is not set
+ CONFIG_MVEBU_MBUS=y
+-CONFIG_OMAP_INTERCONNECT=y
+-CONFIG_OMAP_OCP2SCP=m
+ # CONFIG_SIMPLE_PM_BUS is not set
+-# CONFIG_SUN50I_DE2_BUS is not set
+-CONFIG_SUNXI_RSB=y
+-# CONFIG_TEGRA_GMI is not set
+-CONFIG_TI_SYSC=y
+ CONFIG_VEXPRESS_CONFIG=y
+ CONFIG_CONNECTOR=y
+ CONFIG_PROC_EVENTS=y
+@@ -2042,8 +1843,6 @@
+ CONFIG_MTD_ONENAND=y
+ CONFIG_MTD_ONENAND_VERIFY_WRITE=y
+ # CONFIG_MTD_ONENAND_GENERIC is not set
+-CONFIG_MTD_ONENAND_OMAP2=m
+-# CONFIG_MTD_ONENAND_SAMSUNG is not set
+ # CONFIG_MTD_ONENAND_OTP is not set
+ CONFIG_MTD_ONENAND_2X_PROGRAM=y
+ CONFIG_MTD_NAND_ECC=y
+@@ -2055,21 +1854,15 @@
+ # CONFIG_MTD_NAND_DENALI_PCI is not set
+ # CONFIG_MTD_NAND_DENALI_DT is not set
+ # CONFIG_MTD_NAND_GPIO is not set
+-CONFIG_MTD_NAND_OMAP2=m
+-# CONFIG_MTD_NAND_OMAP_BCH is not set
+ CONFIG_MTD_NAND_RICOH=m
+ # CONFIG_MTD_NAND_DISKONCHIP is not set
+ # CONFIG_MTD_NAND_DOCG4 is not set
+ CONFIG_MTD_NAND_CAFE=m
+ CONFIG_MTD_NAND_MARVELL=m
+ CONFIG_MTD_NAND_NANDSIM=m
+-CONFIG_MTD_NAND_GPMI_NAND=m
+ # CONFIG_MTD_NAND_BRCMNAND is not set
+ # CONFIG_MTD_NAND_PLATFORM is not set
+ CONFIG_MTD_NAND_ORION=m
+-CONFIG_MTD_NAND_MXC=m
+-CONFIG_MTD_NAND_SUNXI=m
+-# CONFIG_MTD_NAND_TEGRA is not set
+ # CONFIG_MTD_SPI_NAND is not set
+ 
+ #
+@@ -2082,7 +1875,6 @@
+ # CONFIG_MTD_MT81xx_NOR is not set
+ CONFIG_MTD_SPI_NOR_USE_4K_SECTORS=y
+ # CONFIG_SPI_CADENCE_QUADSPI is not set
+-# CONFIG_SPI_FSL_QUADSPI is not set
+ CONFIG_MTD_UBI=m
+ CONFIG_MTD_UBI_WL_THRESHOLD=4096
+ CONFIG_MTD_UBI_BEB_LIMIT=20
+@@ -2192,6 +1984,8 @@
+ CONFIG_EEPROM_93CX6=m
+ # CONFIG_EEPROM_93XX46 is not set
+ # CONFIG_EEPROM_IDT_89HPESX is not set
++CONFIG_EEPROM_SFF_8436=m
++CONFIG_EEPROM_OPTOE=m
+ CONFIG_CB710_CORE=m
+ # CONFIG_CB710_DEBUG is not set
+ CONFIG_CB710_DEBUG_ASSUMPTIONS=y
+@@ -2362,7 +2156,6 @@
+ CONFIG_SCSI_OSD_ULD=m
+ CONFIG_SCSI_OSD_DPRINT_SENSE=1
+ # CONFIG_SCSI_OSD_DEBUG is not set
+-CONFIG_HAVE_PATA_PLATFORM=y
+ CONFIG_ATA=m
+ CONFIG_ATA_VERBOSE_ERROR=y
+ CONFIG_SATA_PMP=y
+@@ -2373,12 +2166,8 @@
+ CONFIG_SATA_AHCI=m
+ CONFIG_SATA_MOBILE_LPM_POLICY=3
+ CONFIG_SATA_AHCI_PLATFORM=m
+-# CONFIG_AHCI_DM816 is not set
+-CONFIG_AHCI_IMX=m
+ # CONFIG_AHCI_CEVA is not set
+ CONFIG_AHCI_MVEBU=m
+-CONFIG_AHCI_SUNXI=m
+-CONFIG_AHCI_TEGRA=m
+ # CONFIG_AHCI_QORIQ is not set
+ # CONFIG_SATA_INIC162X is not set
+ CONFIG_SATA_ACARD_AHCI=m
+@@ -2398,7 +2187,6 @@
+ #
+ CONFIG_ATA_PIIX=m
+ # CONFIG_SATA_DWC is not set
+-CONFIG_SATA_HIGHBANK=m
+ CONFIG_SATA_MV=m
+ CONFIG_SATA_NV=m
+ CONFIG_SATA_PROMISE=m
+@@ -2424,7 +2212,6 @@
+ # CONFIG_PATA_HPT37X is not set
+ # CONFIG_PATA_HPT3X2N is not set
+ # CONFIG_PATA_HPT3X3 is not set
+-CONFIG_PATA_IMX=m
+ CONFIG_PATA_IT8213=m
+ CONFIG_PATA_IT821X=m
+ CONFIG_PATA_JMICRON=m
+@@ -2614,6 +2401,7 @@
+ CONFIG_ETHERNET=y
+ CONFIG_MDIO=m
+ CONFIG_NET_VENDOR_3COM=y
++# CONFIG_VORTEX is not set
+ CONFIG_TYPHOON=m
+ CONFIG_NET_VENDOR_ADAPTEC=y
+ CONFIG_ADAPTEC_STARFIRE=m
+@@ -2621,8 +2409,6 @@
+ CONFIG_ET131X=m
+ CONFIG_NET_VENDOR_ALACRITECH=y
+ # CONFIG_SLICOSS is not set
+-CONFIG_NET_VENDOR_ALLWINNER=y
+-CONFIG_SUN4I_EMAC=m
+ CONFIG_NET_VENDOR_ALTEON=y
+ CONFIG_ACENIC=m
+ # CONFIG_ACENIC_OMIT_TIGON_I is not set
+@@ -2658,7 +2444,6 @@
+ CONFIG_BNA=m
+ CONFIG_NET_VENDOR_CADENCE=y
+ # CONFIG_MACB is not set
+-CONFIG_NET_CALXEDA_XGMAC=m
+ CONFIG_NET_VENDOR_CAVIUM=y
+ CONFIG_NET_VENDOR_CHELSIO=y
+ CONFIG_CHELSIO_T1=m
+@@ -2705,11 +2490,6 @@
+ CONFIG_NET_VENDOR_FARADAY=y
+ # CONFIG_FTMAC100 is not set
+ # CONFIG_FTGMAC100 is not set
+-CONFIG_NET_VENDOR_FREESCALE=y
+-CONFIG_FEC=y
+-# CONFIG_FSL_PQ_MDIO is not set
+-# CONFIG_FSL_XGMAC_MDIO is not set
+-# CONFIG_GIANFAR is not set
+ CONFIG_NET_VENDOR_HISILICON=y
+ # CONFIG_HIX5HD2_GMAC is not set
+ # CONFIG_HISI_FEMAC is not set
+@@ -2866,11 +2646,6 @@
+ CONFIG_STMMAC_PLATFORM=m
+ # CONFIG_DWMAC_DWC_QOS_ETH is not set
+ CONFIG_DWMAC_GENERIC=m
+-CONFIG_DWMAC_MESON=m
+-CONFIG_DWMAC_ROCKCHIP=m
+-CONFIG_DWMAC_SOCFPGA=m
+-CONFIG_DWMAC_SUNXI=m
+-CONFIG_DWMAC_SUN8I=m
+ # CONFIG_STMMAC_PCI is not set
+ CONFIG_NET_VENDOR_SUN=y
+ # CONFIG_HAPPYMEAL is not set
+@@ -2882,13 +2657,7 @@
+ CONFIG_NET_VENDOR_TEHUTI=y
+ CONFIG_TEHUTI=m
+ CONFIG_NET_VENDOR_TI=y
+-CONFIG_TI_DAVINCI_EMAC=m
+-CONFIG_TI_DAVINCI_MDIO=m
+-CONFIG_TI_DAVINCI_CPDMA=m
+-CONFIG_TI_CPSW_PHY_SEL=y
+ CONFIG_TI_CPSW_ALE=m
+-CONFIG_TI_CPSW=m
+-# CONFIG_TI_CPTS is not set
+ CONFIG_TLAN=m
+ CONFIG_NET_VENDOR_VIA=y
+ # CONFIG_VIA_RHINE is not set
+@@ -2905,13 +2674,11 @@
+ CONFIG_MDIO_BUS=y
+ CONFIG_MDIO_BCM_UNIMAC=m
+ # CONFIG_MDIO_BITBANG is not set
+-CONFIG_MDIO_BUS_MUX=m
+ # CONFIG_MDIO_BUS_MUX_GPIO is not set
+ # CONFIG_MDIO_BUS_MUX_MMIOREG is not set
+ # CONFIG_MDIO_HISI_FEMAC is not set
+ CONFIG_MDIO_I2C=m
+ # CONFIG_MDIO_MSCC_MIIM is not set
+-CONFIG_MDIO_SUN4I=y
+ CONFIG_PHYLINK=m
+ CONFIG_PHYLIB=y
+ CONFIG_SWPHY=y
+@@ -2943,7 +2710,6 @@
+ CONFIG_LXT_PHY=m
+ CONFIG_MARVELL_PHY=m
+ CONFIG_MARVELL_10G_PHY=m
+-# CONFIG_MESON_GXL_PHY is not set
+ CONFIG_MICREL_PHY=m
+ CONFIG_MICROCHIP_PHY=m
+ CONFIG_MICROCHIP_T1_PHY=m
+@@ -3333,16 +3099,12 @@
+ CONFIG_KEYBOARD_MAX7359=m
+ # CONFIG_KEYBOARD_MCS is not set
+ # CONFIG_KEYBOARD_MPR121 is not set
+-# CONFIG_KEYBOARD_SNVS_PWRKEY is not set
+-CONFIG_KEYBOARD_IMX=m
+ # CONFIG_KEYBOARD_NEWTON is not set
+-CONFIG_KEYBOARD_TEGRA=m
+ CONFIG_KEYBOARD_OPENCORES=m
+ # CONFIG_KEYBOARD_SAMSUNG is not set
+ CONFIG_KEYBOARD_STOWAWAY=m
+ # CONFIG_KEYBOARD_SUNKBD is not set
+ # CONFIG_KEYBOARD_STMPE is not set
+-CONFIG_KEYBOARD_SUN4I_LRADC=m
+ CONFIG_KEYBOARD_OMAP4=m
+ # CONFIG_KEYBOARD_TM2_TOUCHKEY is not set
+ CONFIG_KEYBOARD_TWL4030=m
+@@ -3461,7 +3223,6 @@
+ CONFIG_TOUCHSCREEN_USB_NEXIO=y
+ CONFIG_TOUCHSCREEN_USB_EASYTOUCH=y
+ CONFIG_TOUCHSCREEN_TOUCHIT213=m
+-# CONFIG_TOUCHSCREEN_TS4800 is not set
+ # CONFIG_TOUCHSCREEN_TSC_SERIO is not set
+ CONFIG_TOUCHSCREEN_TSC200X_CORE=m
+ # CONFIG_TOUCHSCREEN_TSC2004 is not set
+@@ -3474,7 +3235,6 @@
+ # CONFIG_TOUCHSCREEN_ST1232 is not set
+ # CONFIG_TOUCHSCREEN_STMFTS is not set
+ CONFIG_TOUCHSCREEN_STMPE=m
+-CONFIG_TOUCHSCREEN_SUN4I=m
+ CONFIG_TOUCHSCREEN_SUR40=m
+ # CONFIG_TOUCHSCREEN_SURFACE3_SPI is not set
+ # CONFIG_TOUCHSCREEN_SX8654 is not set
+@@ -3540,7 +3300,6 @@
+ CONFIG_SERIO=y
+ CONFIG_SERIO_SERPORT=y
+ # CONFIG_SERIO_PARKBD is not set
+-CONFIG_SERIO_AMBAKMI=m
+ # CONFIG_SERIO_PCIPS2 is not set
+ CONFIG_SERIO_LIBPS2=y
+ # CONFIG_SERIO_RAW is not set
+@@ -3548,7 +3307,6 @@
+ # CONFIG_SERIO_PS2MULT is not set
+ # CONFIG_SERIO_ARC_PS2 is not set
+ # CONFIG_SERIO_APBPS2 is not set
+-CONFIG_SERIO_SUN4I_PS2=m
+ # CONFIG_SERIO_GPIO_PS2 is not set
+ # CONFIG_USERIO is not set
+ # CONFIG_GAMEPORT is not set
+@@ -3592,37 +3350,19 @@
+ CONFIG_SERIAL_8250_DW=y
+ # CONFIG_SERIAL_8250_EM is not set
+ # CONFIG_SERIAL_8250_RT288X is not set
+-# CONFIG_SERIAL_8250_OMAP is not set
+ CONFIG_SERIAL_8250_MOXA=m
+ CONFIG_SERIAL_OF_PLATFORM=y
+ 
+ #
+ # Non-8250 serial port support
+ #
+-CONFIG_SERIAL_AMBA_PL010=y
+-CONFIG_SERIAL_AMBA_PL010_CONSOLE=y
+-CONFIG_SERIAL_AMBA_PL011=y
+-CONFIG_SERIAL_AMBA_PL011_CONSOLE=y
+ # CONFIG_SERIAL_EARLYCON_ARM_SEMIHOST is not set
+-CONFIG_SERIAL_MESON=y
+-CONFIG_SERIAL_MESON_CONSOLE=y
+-CONFIG_SERIAL_SAMSUNG=y
+-CONFIG_SERIAL_SAMSUNG_UARTS_4=y
+-CONFIG_SERIAL_SAMSUNG_UARTS=4
+-CONFIG_SERIAL_SAMSUNG_CONSOLE=y
+-CONFIG_SERIAL_TEGRA=y
+ # CONFIG_SERIAL_MAX3100 is not set
+ # CONFIG_SERIAL_MAX310X is not set
+-CONFIG_SERIAL_IMX=y
+-CONFIG_SERIAL_IMX_CONSOLE=y
+ # CONFIG_SERIAL_UARTLITE is not set
+ CONFIG_SERIAL_CORE=y
+ CONFIG_SERIAL_CORE_CONSOLE=y
+ # CONFIG_SERIAL_JSM is not set
+-CONFIG_SERIAL_VT8500=y
+-CONFIG_SERIAL_VT8500_CONSOLE=y
+-CONFIG_SERIAL_OMAP=y
+-CONFIG_SERIAL_OMAP_CONSOLE=y
+ # CONFIG_SERIAL_SCCNXP is not set
+ # CONFIG_SERIAL_SC16IS7XX is not set
+ # CONFIG_SERIAL_BCM63XX is not set
+@@ -3639,7 +3379,6 @@
+ # CONFIG_SERIAL_CONEXANT_DIGICOLOR is not set
+ # CONFIG_SERIAL_ST_ASC is not set
+ # CONFIG_SERIAL_MVEBU_UART is not set
+-CONFIG_SERIAL_MCTRL_GPIO=y
+ CONFIG_SERIAL_DEV_BUS=y
+ CONFIG_SERIAL_DEV_CTRL_TTYPORT=y
+ CONFIG_TTY_PRINTK=m
+@@ -3654,13 +3393,8 @@
+ # CONFIG_IPMI_HANDLER is not set
+ CONFIG_HW_RANDOM=m
+ # CONFIG_HW_RANDOM_TIMERIOMEM is not set
+-CONFIG_HW_RANDOM_BCM2835=m
+ CONFIG_HW_RANDOM_OMAP=m
+-CONFIG_HW_RANDOM_OMAP3_ROM=m
+ CONFIG_HW_RANDOM_VIRTIO=m
+-CONFIG_HW_RANDOM_IMX_RNGC=m
+-CONFIG_HW_RANDOM_MESON=m
+-CONFIG_HW_RANDOM_EXYNOS=m
+ # CONFIG_APPLICOM is not set
+ # CONFIG_RAW_DRIVER is not set
+ # CONFIG_TCG_TPM is not set
+@@ -3680,7 +3414,7 @@
+ # Multiplexer I2C Chip support
+ #
+ CONFIG_I2C_ARB_GPIO_CHALLENGE=m
+-# CONFIG_I2C_MUX_GPIO is not set
++CONFIG_I2C_MUX_GPIO=m
+ # CONFIG_I2C_MUX_GPMUX is not set
+ # CONFIG_I2C_MUX_LTC4306 is not set
+ # CONFIG_I2C_MUX_PCA9541 is not set
+@@ -3718,32 +3452,18 @@
+ #
+ # I2C system bus drivers (mostly embedded / system-on-chip)
+ #
+-# CONFIG_I2C_ALTERA is not set
+-CONFIG_I2C_BCM2835=m
+ # CONFIG_I2C_CBUS_GPIO is not set
+ # CONFIG_I2C_DESIGNWARE_PLATFORM is not set
+ # CONFIG_I2C_DESIGNWARE_PCI is not set
+ # CONFIG_I2C_EMEV2 is not set
+-CONFIG_I2C_EXYNOS5=m
+ CONFIG_I2C_GPIO=y
+ # CONFIG_I2C_GPIO_FAULT_INJECTOR is not set
+-CONFIG_I2C_IMX=m
+-# CONFIG_I2C_IMX_LPI2C is not set
+-CONFIG_I2C_MESON=m
+ CONFIG_I2C_MV64XXX=m
+-# CONFIG_I2C_NOMADIK is not set
+ CONFIG_I2C_OCORES=m
+-CONFIG_I2C_OMAP=y
+ CONFIG_I2C_PCA_PLATFORM=m
+ # CONFIG_I2C_PXA is not set
+ CONFIG_I2C_RK3X=m
+-CONFIG_HAVE_S3C2410_I2C=y
+-CONFIG_I2C_S3C2410=y
+ CONFIG_I2C_SIMTEC=m
+-CONFIG_I2C_SUN6I_P2WI=m
+-CONFIG_I2C_TEGRA=y
+-CONFIG_I2C_VERSATILE=m
+-# CONFIG_I2C_WMT is not set
+ # CONFIG_I2C_XILINX is not set
+ 
+ #
+@@ -3777,34 +3497,18 @@
+ # CONFIG_SPI_ALTERA is not set
+ # CONFIG_SPI_ARMADA_3700 is not set
+ # CONFIG_SPI_AXI_SPI_ENGINE is not set
+-CONFIG_SPI_BCM2835=m
+-CONFIG_SPI_BCM2835AUX=m
+-# CONFIG_SPI_BCM_QSPI is not set
+ CONFIG_SPI_BITBANG=y
+ CONFIG_SPI_BUTTERFLY=m
+ # CONFIG_SPI_CADENCE is not set
+ # CONFIG_SPI_DESIGNWARE is not set
+-# CONFIG_SPI_FSL_LPSPI is not set
+ CONFIG_SPI_GPIO=y
+-CONFIG_SPI_IMX=m
+ CONFIG_SPI_LM70_LLP=m
+ # CONFIG_SPI_FSL_SPI is not set
+-CONFIG_SPI_MESON_SPICC=m
+-CONFIG_SPI_MESON_SPIFC=m
+ # CONFIG_SPI_OC_TINY is not set
+-CONFIG_SPI_OMAP24XX=m
+-CONFIG_SPI_TI_QSPI=m
+ CONFIG_SPI_ORION=m
+-CONFIG_SPI_PL022=m
+ # CONFIG_SPI_PXA2XX is not set
+ CONFIG_SPI_ROCKCHIP=m
+-# CONFIG_SPI_S3C64XX is not set
+ # CONFIG_SPI_SC18IS602 is not set
+-CONFIG_SPI_SUN4I=m
+-CONFIG_SPI_SUN6I=m
+-CONFIG_SPI_TEGRA114=m
+-CONFIG_SPI_TEGRA20_SFLASH=m
+-# CONFIG_SPI_TEGRA20_SLINK is not set
+ # CONFIG_SPI_XCOMM is not set
+ # CONFIG_SPI_XILINX is not set
+ # CONFIG_SPI_ZYNQMP_GQSPI is not set
+@@ -3823,17 +3527,14 @@
+ #
+ # HSI controllers
+ #
+-CONFIG_OMAP_SSI=m
+ 
+ #
+ # HSI clients
+ #
+-CONFIG_NOKIA_MODEM=m
+-CONFIG_CMT_SPEECH=m
+-CONFIG_SSI_PROTOCOL=m
+ # CONFIG_HSI_CHAR is not set
+ CONFIG_PPS=y
+ # CONFIG_PPS_DEBUG is not set
++# CONFIG_NTP_PPS is not set
+ 
+ #
+ # PPS clients support
+@@ -3866,20 +3567,10 @@
+ CONFIG_PINCTRL_AXP209=m
+ # CONFIG_PINCTRL_AMD is not set
+ CONFIG_PINCTRL_MCP23S08=m
+-CONFIG_PINCTRL_ROCKCHIP=y
+ CONFIG_PINCTRL_SINGLE=y
+ # CONFIG_PINCTRL_SX150X is not set
+ CONFIG_PINCTRL_PALMAS=y
+ # CONFIG_PINCTRL_RK805 is not set
+-CONFIG_PINCTRL_BCM2835=y
+-CONFIG_PINCTRL_IMX=y
+-CONFIG_PINCTRL_IMX51=y
+-CONFIG_PINCTRL_IMX53=y
+-CONFIG_PINCTRL_IMX6Q=y
+-CONFIG_PINCTRL_IMX6SL=y
+-CONFIG_PINCTRL_IMX6SLL=y
+-CONFIG_PINCTRL_IMX6SX=y
+-CONFIG_PINCTRL_IMX6UL=y
+ CONFIG_PINCTRL_MVEBU=y
+ CONFIG_PINCTRL_DOVE=y
+ CONFIG_PINCTRL_ARMADA_370=y
+@@ -3887,34 +3578,6 @@
+ CONFIG_PINCTRL_ARMADA_38X=y
+ CONFIG_PINCTRL_ARMADA_39X=y
+ CONFIG_PINCTRL_ARMADA_XP=y
+-CONFIG_PINCTRL_SAMSUNG=y
+-CONFIG_PINCTRL_EXYNOS=y
+-CONFIG_PINCTRL_EXYNOS_ARM=y
+-CONFIG_PINCTRL_SUNXI=y
+-CONFIG_PINCTRL_SUN4I_A10=y
+-CONFIG_PINCTRL_SUN5I=y
+-CONFIG_PINCTRL_SUN6I_A31=y
+-CONFIG_PINCTRL_SUN6I_A31_R=y
+-CONFIG_PINCTRL_SUN8I_A23=y
+-CONFIG_PINCTRL_SUN8I_A33=y
+-CONFIG_PINCTRL_SUN8I_A83T=y
+-CONFIG_PINCTRL_SUN8I_A83T_R=y
+-CONFIG_PINCTRL_SUN8I_A23_R=y
+-CONFIG_PINCTRL_SUN8I_H3=y
+-CONFIG_PINCTRL_SUN8I_H3_R=y
+-CONFIG_PINCTRL_SUN8I_V3S=y
+-CONFIG_PINCTRL_SUN9I_A80=y
+-CONFIG_PINCTRL_SUN9I_A80_R=y
+-CONFIG_PINCTRL_TEGRA=y
+-CONFIG_PINCTRL_TEGRA124=y
+-CONFIG_PINCTRL_TEGRA_XUSB=y
+-CONFIG_PINCTRL_TI_IODELAY=y
+-CONFIG_PINCTRL_WMT=y
+-CONFIG_PINCTRL_WM8850=y
+-CONFIG_PINCTRL_MESON=y
+-CONFIG_PINCTRL_MESON8=y
+-CONFIG_PINCTRL_MESON8B=y
+-CONFIG_PINCTRL_MESON8_PMX=y
+ CONFIG_ARCH_HAVE_CUSTOM_GPIO_H=y
+ CONFIG_GPIOLIB=y
+ CONFIG_GPIOLIB_FASTPATH_LIMIT=512
+@@ -3929,7 +3592,6 @@
+ #
+ # CONFIG_GPIO_74XX_MMIO is not set
+ # CONFIG_GPIO_ALTERA is not set
+-CONFIG_GPIO_RASPBERRYPI_EXP=y
+ # CONFIG_GPIO_DWAPB is not set
+ CONFIG_GPIO_EXAR=m
+ # CONFIG_GPIO_FTGPIO010 is not set
+@@ -3940,12 +3602,7 @@
+ # CONFIG_GPIO_MOCKUP is not set
+ # CONFIG_GPIO_MPC8XXX is not set
+ CONFIG_GPIO_MVEBU=y
+-CONFIG_GPIO_MXC=y
+-CONFIG_GPIO_OMAP=y
+-CONFIG_GPIO_PL061=y
+ # CONFIG_GPIO_SYSCON is not set
+-CONFIG_GPIO_TEGRA=y
+-# CONFIG_GPIO_TS4800 is not set
+ # CONFIG_GPIO_XILINX is not set
+ # CONFIG_GPIO_ZEVIO is not set
+ 
+@@ -3959,7 +3616,6 @@
+ CONFIG_GPIO_PCA953X=m
+ CONFIG_GPIO_PCF857X=m
+ # CONFIG_GPIO_TPIC2810 is not set
+-# CONFIG_GPIO_TS4900 is not set
+ 
+ #
+ # MFD GPIO expanders
+@@ -4001,10 +3657,8 @@
+ # CONFIG_W1_MASTER_MATROX is not set
+ CONFIG_W1_MASTER_DS2490=m
+ CONFIG_W1_MASTER_DS2482=m
+-# CONFIG_W1_MASTER_MXC is not set
+ # CONFIG_W1_MASTER_DS1WM is not set
+ CONFIG_W1_MASTER_GPIO=m
+-CONFIG_HDQ_MASTER_OMAP=m
+ 
+ #
+ # 1-wire Slaves
+@@ -4027,7 +3681,6 @@
+ CONFIG_W1_SLAVE_DS28E04=m
+ CONFIG_W1_SLAVE_DS28E17=m
+ CONFIG_POWER_AVS=y
+-CONFIG_ROCKCHIP_IODOMAIN=m
+ CONFIG_POWER_RESET=y
+ CONFIG_POWER_RESET_AS3722=y
+ # CONFIG_POWER_RESET_BRCMKONA is not set
+@@ -4151,6 +3804,7 @@
+ CONFIG_SENSORS_MAX6639=m
+ CONFIG_SENSORS_MAX6642=m
+ CONFIG_SENSORS_MAX6650=m
++# CONFIG_SENSORS_MAX6620 is not set
+ # CONFIG_SENSORS_MAX6697 is not set
+ # CONFIG_SENSORS_MAX31790 is not set
+ # CONFIG_SENSORS_MCP3021 is not set
+@@ -4183,7 +3837,6 @@
+ # CONFIG_SENSORS_PCF8591 is not set
+ # CONFIG_PMBUS is not set
+ CONFIG_SENSORS_PWM_FAN=m
+-# CONFIG_SENSORS_RASPBERRYPI_HWMON is not set
+ # CONFIG_SENSORS_SHT15 is not set
+ CONFIG_SENSORS_SHT21=m
+ # CONFIG_SENSORS_SHT3x is not set
+@@ -4250,40 +3903,13 @@
+ # CONFIG_CLOCK_THERMAL is not set
+ CONFIG_DEVFREQ_THERMAL=y
+ # CONFIG_THERMAL_EMULATION is not set
+-CONFIG_IMX_THERMAL=m
+ # CONFIG_QORIQ_THERMAL is not set
+-CONFIG_ROCKCHIP_THERMAL=m
+ CONFIG_DOVE_THERMAL=m
+ CONFIG_ARMADA_THERMAL=y
+ 
+ #
+ # ACPI INT340X thermal drivers
+ #
+-
+-#
+-# Broadcom thermal drivers
+-#
+-CONFIG_BCM2835_THERMAL=m
+-
+-#
+-# Texas Instruments thermal drivers
+-#
+-CONFIG_TI_SOC_THERMAL=m
+-CONFIG_TI_THERMAL=y
+-# CONFIG_OMAP3_THERMAL is not set
+-CONFIG_OMAP4_THERMAL=y
+-CONFIG_OMAP5_THERMAL=y
+-CONFIG_DRA752_THERMAL=y
+-
+-#
+-# Samsung thermal drivers
+-#
+-CONFIG_EXYNOS_THERMAL=y
+-
+-#
+-# NVIDIA Tegra thermal drivers
+-#
+-CONFIG_TEGRA_SOCTHERM=y
+ # CONFIG_GENERIC_ADC_THERMAL is not set
+ CONFIG_WATCHDOG=y
+ CONFIG_WATCHDOG_CORE=y
+@@ -4300,25 +3926,14 @@
+ # CONFIG_GPIO_WATCHDOG is not set
+ # CONFIG_XILINX_WATCHDOG is not set
+ # CONFIG_ZIIRAVE_WATCHDOG is not set
+-CONFIG_ARM_SP805_WATCHDOG=m
+ # CONFIG_CADENCE_WATCHDOG is not set
+ # CONFIG_FTWDT010_WATCHDOG is not set
+-CONFIG_HAVE_S3C2410_WATCHDOG=y
+-CONFIG_S3C2410_WATCHDOG=m
+ CONFIG_DW_WATCHDOG=m
+-CONFIG_OMAP_WATCHDOG=m
+ CONFIG_ORION_WATCHDOG=m
+-CONFIG_SUNXI_WATCHDOG=m
+ CONFIG_TWL4030_WATCHDOG=m
+-# CONFIG_TS4800_WATCHDOG is not set
+ # CONFIG_MAX63XX_WATCHDOG is not set
+-CONFIG_IMX2_WDT=m
+-CONFIG_TEGRA_WATCHDOG=m
+-# CONFIG_MESON_GXBB_WATCHDOG is not set
+-CONFIG_MESON_WATCHDOG=m
+ # CONFIG_ALIM7101_WDT is not set
+ # CONFIG_I6300ESB_WDT is not set
+-CONFIG_BCM2835_WDT=m
+ # CONFIG_MEN_A21_WDT is not set
+ CONFIG_XEN_WDT=m
+ 
+@@ -4368,9 +3983,7 @@
+ # Multifunction device drivers
+ #
+ CONFIG_MFD_CORE=y
+-# CONFIG_MFD_ALTERA_A10SR is not set
+ # CONFIG_MFD_ACT8945A is not set
+-# CONFIG_MFD_SUN4I_GPADC is not set
+ # CONFIG_MFD_AS3711 is not set
+ CONFIG_MFD_AS3722=y
+ # CONFIG_PMIC_ADP5520 is not set
+@@ -4379,10 +3992,8 @@
+ # CONFIG_MFD_ATMEL_HLCDC is not set
+ # CONFIG_MFD_BCM590XX is not set
+ # CONFIG_MFD_BD9571MWV is not set
+-CONFIG_MFD_AC100=y
+ CONFIG_MFD_AXP20X=y
+ CONFIG_MFD_AXP20X_I2C=y
+-# CONFIG_MFD_AXP20X_RSB is not set
+ CONFIG_MFD_CROS_EC=m
+ # CONFIG_MFD_CROS_EC_CHARDEV is not set
+ # CONFIG_MFD_MADERA is not set
+@@ -4396,7 +4007,6 @@
+ # CONFIG_MFD_DA9063 is not set
+ # CONFIG_MFD_DA9150 is not set
+ # CONFIG_MFD_DLN2 is not set
+-# CONFIG_MFD_EXYNOS_LPASS is not set
+ CONFIG_MFD_MC13XXX=m
+ CONFIG_MFD_MC13XXX_SPI=m
+ CONFIG_MFD_MC13XXX_I2C=m
+@@ -4446,13 +4056,11 @@
+ #
+ CONFIG_STMPE_I2C=y
+ # CONFIG_STMPE_SPI is not set
+-CONFIG_MFD_SUN6I_PRCM=y
+ CONFIG_MFD_SYSCON=y
+ CONFIG_MFD_TI_AM335X_TSCADC=m
+ # CONFIG_MFD_LP3943 is not set
+ # CONFIG_MFD_LP8788 is not set
+ # CONFIG_MFD_TI_LMU is not set
+-CONFIG_MFD_OMAP_USB_HOST=y
+ CONFIG_MFD_PALMAS=y
+ # CONFIG_TPS6105X is not set
+ # CONFIG_TPS65010 is not set
+@@ -4525,7 +4133,6 @@
+ CONFIG_REGULATOR_MC13892=m
+ # CONFIG_REGULATOR_MT6311 is not set
+ CONFIG_REGULATOR_PALMAS=y
+-CONFIG_REGULATOR_PBIAS=m
+ CONFIG_REGULATOR_PFUZE100=m
+ # CONFIG_REGULATOR_PV88060 is not set
+ # CONFIG_REGULATOR_PV88080 is not set
+@@ -4535,7 +4142,6 @@
+ CONFIG_REGULATOR_S2MPA01=m
+ CONFIG_REGULATOR_S2MPS11=m
+ CONFIG_REGULATOR_S5M8767=m
+-CONFIG_REGULATOR_TI_ABB=m
+ CONFIG_REGULATOR_SY8106A=m
+ # CONFIG_REGULATOR_TPS51632 is not set
+ # CONFIG_REGULATOR_TPS62360 is not set
+@@ -4549,7 +4155,6 @@
+ CONFIG_REGULATOR_VEXPRESS=m
+ CONFIG_CEC_CORE=m
+ CONFIG_CEC_NOTIFIER=y
+-CONFIG_CEC_PIN=y
+ CONFIG_RC_CORE=m
+ CONFIG_RC_MAP=m
+ CONFIG_LIRC=y
+@@ -4570,19 +4175,16 @@
+ CONFIG_IR_IMON=m
+ CONFIG_IR_IMON_RAW=m
+ CONFIG_IR_MCEUSB=m
+-# CONFIG_IR_MESON is not set
+ CONFIG_IR_REDRAT3=m
+ # CONFIG_IR_SPI is not set
+ CONFIG_IR_STREAMZAP=m
+ CONFIG_IR_IGORPLUGUSB=m
+ CONFIG_IR_IGUANA=m
+ CONFIG_IR_TTUSBIR=m
+-# CONFIG_IR_RX51 is not set
+ CONFIG_RC_LOOPBACK=m
+ CONFIG_IR_GPIO_CIR=m
+ # CONFIG_IR_GPIO_TX is not set
+ # CONFIG_IR_PWM_TX is not set
+-CONFIG_IR_SUNXI=m
+ # CONFIG_IR_SERIAL is not set
+ # CONFIG_IR_SIR is not set
+ CONFIG_MEDIA_SUPPORT=y
+@@ -4597,7 +4199,6 @@
+ CONFIG_MEDIA_SDR_SUPPORT=y
+ CONFIG_MEDIA_CEC_SUPPORT=y
+ # CONFIG_MEDIA_CEC_RC is not set
+-# CONFIG_CEC_PIN_ERROR_INJ is not set
+ CONFIG_MEDIA_CONTROLLER=y
+ # CONFIG_MEDIA_CONTROLLER_DVB is not set
+ CONFIG_VIDEO_DEV=y
+@@ -4607,7 +4208,6 @@
+ # CONFIG_VIDEO_FIXED_MINOR_RANGES is not set
+ # CONFIG_VIDEO_PCI_SKELETON is not set
+ CONFIG_VIDEO_TUNER=m
+-CONFIG_V4L2_MEM2MEM_DEV=m
+ CONFIG_V4L2_FWNODE=m
+ CONFIG_VIDEOBUF_GEN=m
+ CONFIG_VIDEOBUF_DMA_SG=m
+@@ -4865,26 +4465,11 @@
+ CONFIG_VIDEO_CAFE_CCIC=m
+ # CONFIG_VIDEO_CADENCE is not set
+ # CONFIG_VIDEO_MUX is not set
+-CONFIG_VIDEO_OMAP3=m
+-# CONFIG_VIDEO_OMAP3_DEBUG is not set
+ # CONFIG_SOC_CAMERA is not set
+-# CONFIG_VIDEO_SAMSUNG_EXYNOS4_IS is not set
+ # CONFIG_VIDEO_XILINX is not set
+-# CONFIG_VIDEO_TI_CAL is not set
+ CONFIG_V4L_MEM2MEM_DRIVERS=y
+-# CONFIG_VIDEO_CODA is not set
+ # CONFIG_VIDEO_MEM2MEM_DEINTERLACE is not set
+-# CONFIG_VIDEO_SAMSUNG_S5P_G2D is not set
+-# CONFIG_VIDEO_SAMSUNG_S5P_JPEG is not set
+-# CONFIG_VIDEO_SAMSUNG_S5P_MFC is not set
+-# CONFIG_VIDEO_SAMSUNG_EXYNOS_GSC is not set
+ # CONFIG_VIDEO_SH_VEU is not set
+-# CONFIG_VIDEO_ROCKCHIP_RGA is not set
+-CONFIG_VIDEO_TI_VPE=m
+-# CONFIG_VIDEO_TI_VPE_DEBUG is not set
+-CONFIG_VIDEO_TI_VPDMA=m
+-CONFIG_VIDEO_TI_SC=m
+-CONFIG_VIDEO_TI_CSC=m
+ CONFIG_V4L_TEST_DRIVERS=y
+ # CONFIG_VIDEO_VIMC is not set
+ CONFIG_VIDEO_VIVID=m
+@@ -5248,8 +4833,6 @@
+ #
+ CONFIG_VGA_ARB=y
+ CONFIG_VGA_ARB_MAX_GPUS=16
+-CONFIG_TEGRA_HOST1X=m
+-CONFIG_TEGRA_HOST1X_FIREWALL=y
+ CONFIG_IMX_IPUV3_CORE=m
+ CONFIG_DRM=m
+ CONFIG_DRM_MIPI_DSI=y
+@@ -5266,7 +4849,6 @@
+ CONFIG_DRM_GEM_CMA_HELPER=y
+ CONFIG_DRM_KMS_CMA_HELPER=y
+ CONFIG_DRM_VM=y
+-CONFIG_DRM_SCHED=m
+ 
+ #
+ # I2C encoder or helper chips
+@@ -5289,7 +4871,6 @@
+ #
+ CONFIG_DRM_NOUVEAU=m
+ CONFIG_NOUVEAU_LEGACY_CTX_SUPPORT=y
+-CONFIG_NOUVEAU_PLATFORM_DRIVER=y
+ CONFIG_NOUVEAU_DEBUG=5
+ CONFIG_NOUVEAU_DEBUG_DEFAULT=3
+ # CONFIG_NOUVEAU_DEBUG_MMU is not set
+@@ -5323,13 +4904,6 @@
+ # CONFIG_DRM_EXYNOS_ROTATOR is not set
+ # CONFIG_DRM_EXYNOS_SCALER is not set
+ # CONFIG_DRM_EXYNOS_GSC is not set
+-CONFIG_DRM_ROCKCHIP=m
+-CONFIG_ROCKCHIP_ANALOGIX_DP=y
+-# CONFIG_ROCKCHIP_CDN_DP is not set
+-CONFIG_ROCKCHIP_DW_HDMI=y
+-CONFIG_ROCKCHIP_DW_MIPI_DSI=y
+-# CONFIG_ROCKCHIP_INNO_HDMI is not set
+-# CONFIG_ROCKCHIP_LVDS is not set
+ CONFIG_DRM_UDL=m
+ # CONFIG_DRM_AST is not set
+ # CONFIG_DRM_MGAG200 is not set
+@@ -5337,14 +4911,6 @@
+ # CONFIG_DRM_ARMADA is not set
+ # CONFIG_DRM_RCAR_DW_HDMI is not set
+ # CONFIG_DRM_RCAR_LVDS is not set
+-CONFIG_DRM_SUN4I=m
+-CONFIG_DRM_SUN4I_HDMI=m
+-CONFIG_DRM_SUN4I_HDMI_CEC=y
+-CONFIG_DRM_SUN4I_BACKEND=m
+-CONFIG_DRM_SUN6I_DSI=m
+-CONFIG_DRM_SUN8I_DW_HDMI=m
+-CONFIG_DRM_SUN8I_MIXER=m
+-CONFIG_DRM_SUN8I_TCON_TOP=m
+ CONFIG_DRM_OMAP=m
+ CONFIG_OMAP2_DSS_INIT=y
+ CONFIG_OMAP_DSS_BASE=m
+@@ -5384,9 +4950,6 @@
+ CONFIG_DRM_BOCHS=m
+ CONFIG_DRM_VIRTIO_GPU=m
+ # CONFIG_DRM_FSL_DCU is not set
+-CONFIG_DRM_TEGRA=m
+-# CONFIG_DRM_TEGRA_DEBUG is not set
+-CONFIG_DRM_TEGRA_STAGING=y
+ # CONFIG_DRM_STM is not set
+ CONFIG_DRM_PANEL=y
+ 
+@@ -5444,15 +5007,9 @@
+ # CONFIG_DRM_IMX_TVE is not set
+ CONFIG_DRM_IMX_LDB=m
+ CONFIG_DRM_IMX_HDMI=m
+-# CONFIG_DRM_V3D is not set
+-CONFIG_DRM_VC4=m
+-# CONFIG_DRM_VC4_HDMI_CEC is not set
+-CONFIG_DRM_ETNAVIV=m
+-CONFIG_DRM_ETNAVIV_THERMAL=y
+ # CONFIG_DRM_ARCPGU is not set
+ # CONFIG_DRM_HISI_HIBMC is not set
+ # CONFIG_DRM_MXSFB is not set
+-# CONFIG_DRM_MESON is not set
+ # CONFIG_DRM_TINYDRM is not set
+ # CONFIG_DRM_PL111 is not set
+ # CONFIG_DRM_TVE200 is not set
+@@ -5463,7 +5020,7 @@
+ # CONFIG_DRM_MGA is not set
+ CONFIG_DRM_VIA=m
+ CONFIG_DRM_SAVAGE=m
+-CONFIG_DRM_PANEL_ORIENTATION_QUIRKS=y
++CONFIG_DRM_PANEL_ORIENTATION_QUIRKS=m
+ 
+ #
+ # Frame buffer Devices
+@@ -5492,14 +5049,10 @@
+ #
+ # CONFIG_FB_CIRRUS is not set
+ # CONFIG_FB_PM2 is not set
+-CONFIG_FB_ARMCLCD=y
+-CONFIG_PLAT_VERSATILE_CLCD=y
+-# CONFIG_FB_IMX is not set
+ # CONFIG_FB_CYBER2000 is not set
+ # CONFIG_FB_ASILIANT is not set
+ # CONFIG_FB_IMSTT is not set
+ # CONFIG_FB_UVESA is not set
+-CONFIG_FB_EFI=y
+ # CONFIG_FB_OPENCORES is not set
+ # CONFIG_FB_S1D13XXX is not set
+ # CONFIG_FB_I740 is not set
+@@ -5522,22 +5075,16 @@
+ CONFIG_FB_ARK=m
+ CONFIG_FB_PM3=m
+ # CONFIG_FB_CARMINE is not set
+-CONFIG_FB_VT8500=y
+-CONFIG_FB_WM8505=y
+-# CONFIG_FB_WMT_GE_ROPS is not set
+ CONFIG_FB_SMSCUFX=m
+ CONFIG_FB_UDL=m
+ # CONFIG_FB_IBM_GXT4500 is not set
+-# CONFIG_FB_DA8XX is not set
+ # CONFIG_FB_VIRTUAL is not set
+ CONFIG_XEN_FBDEV_FRONTEND=y
+ # CONFIG_FB_METRONOME is not set
+ CONFIG_FB_MB862XX=m
+ CONFIG_FB_MB862XX_PCI_GDC=y
+ CONFIG_FB_MB862XX_I2C=y
+-CONFIG_FB_MX3=y
+ # CONFIG_FB_BROADSHEET is not set
+-# CONFIG_FB_MXS is not set
+ CONFIG_FB_SIMPLE=y
+ # CONFIG_FB_SSD1307 is not set
+ # CONFIG_FB_SM712 is not set
+@@ -5580,7 +5127,6 @@
+ CONFIG_SND_PCM=m
+ CONFIG_SND_PCM_ELD=y
+ CONFIG_SND_PCM_IEC958=y
+-CONFIG_SND_DMAENGINE_PCM=m
+ CONFIG_SND_HWDEP=m
+ CONFIG_SND_SEQ_DEVICE=m
+ CONFIG_SND_RAWMIDI=m
+@@ -5662,6 +5208,7 @@
+ # CONFIG_SND_INTEL8X0M is not set
+ # CONFIG_SND_KORG1212 is not set
+ CONFIG_SND_LOLA=m
++# CONFIG_SND_LX6464ES is not set
+ # CONFIG_SND_MIXART is not set
+ # CONFIG_SND_NM256 is not set
+ CONFIG_SND_PCXHR=m
+@@ -5678,33 +5225,9 @@
+ #
+ # HD-Audio
+ #
+-CONFIG_SND_HDA=m
+ # CONFIG_SND_HDA_INTEL is not set
+-CONFIG_SND_HDA_TEGRA=m
+-CONFIG_SND_HDA_HWDEP=y
+-CONFIG_SND_HDA_RECONFIG=y
+-CONFIG_SND_HDA_INPUT_BEEP=y
+-CONFIG_SND_HDA_INPUT_BEEP_MODE=1
+-CONFIG_SND_HDA_PATCH_LOADER=y
+-CONFIG_SND_HDA_CODEC_REALTEK=m
+-CONFIG_SND_HDA_CODEC_ANALOG=m
+-CONFIG_SND_HDA_CODEC_SIGMATEL=m
+-CONFIG_SND_HDA_CODEC_VIA=m
+-CONFIG_SND_HDA_CODEC_HDMI=m
+-CONFIG_SND_HDA_CODEC_CIRRUS=m
+-CONFIG_SND_HDA_CODEC_CONEXANT=m
+-CONFIG_SND_HDA_CODEC_CA0110=m
+-CONFIG_SND_HDA_CODEC_CA0132=m
+-CONFIG_SND_HDA_CODEC_CA0132_DSP=y
+-CONFIG_SND_HDA_CODEC_CMEDIA=m
+-CONFIG_SND_HDA_CODEC_SI3054=m
+-CONFIG_SND_HDA_GENERIC=m
+-CONFIG_SND_HDA_POWER_SAVE_DEFAULT=1
+-CONFIG_SND_HDA_CORE=m
+-CONFIG_SND_HDA_DSP_LOADER=y
+ CONFIG_SND_HDA_PREALLOC_SIZE=2048
+ CONFIG_SND_ARM=y
+-# CONFIG_SND_ARMAACI is not set
+ CONFIG_SND_SPI=y
+ CONFIG_SND_USB=y
+ CONFIG_SND_USB_AUDIO=m
+@@ -5731,14 +5254,8 @@
+ CONFIG_SND_FIREWIRE_MOTU=m
+ CONFIG_SND_FIREFACE=m
+ CONFIG_SND_SOC=m
+-CONFIG_SND_SOC_GENERIC_DMAENGINE_PCM=y
+ # CONFIG_SND_SOC_AMD_ACP is not set
+ # CONFIG_SND_ATMEL_SOC is not set
+-CONFIG_SND_BCM2835_SOC_I2S=m
+-CONFIG_SND_EDMA_SOC=m
+-# CONFIG_SND_DAVINCI_SOC_I2S is not set
+-CONFIG_SND_DAVINCI_SOC_MCASP=m
+-# CONFIG_SND_AM33XX_SOC_EVM is not set
+ # CONFIG_SND_DESIGNWARE_I2S is not set
+ 
+ #
+@@ -5753,85 +5270,15 @@
+ CONFIG_SND_SOC_FSL_SSI=m
+ CONFIG_SND_SOC_FSL_SPDIF=m
+ # CONFIG_SND_SOC_FSL_ESAI is not set
+-CONFIG_SND_SOC_FSL_UTILS=m
+-CONFIG_SND_SOC_IMX_PCM_DMA=m
+ CONFIG_SND_SOC_IMX_AUDMUX=m
+-CONFIG_SND_IMX_SOC=m
+-CONFIG_SND_SOC_IMX_PCM_FIQ=m
+-CONFIG_SND_SOC_IMX_SSI=m
+-
+-#
+-# SoC Audio support for Freescale i.MX boards:
+-#
+-CONFIG_SND_SOC_EUKREA_TLV320=m
+-CONFIG_SND_SOC_IMX_ES8328=m
+-CONFIG_SND_SOC_IMX_SGTL5000=m
+-CONFIG_SND_SOC_IMX_SPDIF=m
+-CONFIG_SND_SOC_IMX_MC13783=m
+-# CONFIG_SND_SOC_FSL_ASOC_CARD is not set
+ # CONFIG_SND_I2S_HI6210_I2S is not set
+-CONFIG_SND_OMAP_SOC=m
+-CONFIG_SND_SDMA_SOC=m
+-CONFIG_SND_OMAP_SOC_DMIC=m
+-CONFIG_SND_OMAP_SOC_MCBSP=m
+-CONFIG_SND_OMAP_SOC_MCPDM=m
+-# CONFIG_SND_OMAP_SOC_HDMI_AUDIO is not set
+-CONFIG_SND_OMAP_SOC_RX51=m
+-CONFIG_SND_OMAP_SOC_AM3517EVM=m
+-CONFIG_SND_OMAP_SOC_OMAP_TWL4030=m
+-CONFIG_SND_OMAP_SOC_OMAP_ABE_TWL6040=m
+-CONFIG_SND_OMAP_SOC_OMAP3_PANDORA=m
+ CONFIG_SND_KIRKWOOD_SOC=m
+ # CONFIG_SND_KIRKWOOD_SOC_ARMADA370_DB is not set
+ # CONFIG_SND_SOC_IMG is not set
+ 
+ #
+-# ASoC support for Amlogic platforms
+-#
+-# CONFIG_SND_MESON_AXG_FRDDR is not set
+-# CONFIG_SND_MESON_AXG_TODDR is not set
+-# CONFIG_SND_MESON_AXG_TDMIN is not set
+-# CONFIG_SND_MESON_AXG_TDMOUT is not set
+-# CONFIG_SND_MESON_AXG_SOUND_CARD is not set
+-# CONFIG_SND_MESON_AXG_SPDIFOUT is not set
+-CONFIG_SND_SOC_ROCKCHIP=m
+-CONFIG_SND_SOC_ROCKCHIP_I2S=m
+-# CONFIG_SND_SOC_ROCKCHIP_PDM is not set
+-CONFIG_SND_SOC_ROCKCHIP_SPDIF=m
+-CONFIG_SND_SOC_ROCKCHIP_MAX98090=m
+-CONFIG_SND_SOC_ROCKCHIP_RT5645=m
+-# CONFIG_SND_SOC_RK3288_HDMI_ANALOG is not set
+-# CONFIG_SND_SOC_RK3399_GRU_SOUND is not set
+-# CONFIG_SND_SOC_SAMSUNG is not set
+-
+-#
+ # STMicroelectronics STM32 SOC audio support
+ #
+-
+-#
+-# Allwinner SoC Audio support
+-#
+-CONFIG_SND_SUN4I_CODEC=m
+-CONFIG_SND_SUN8I_CODEC=m
+-CONFIG_SND_SUN8I_CODEC_ANALOG=m
+-# CONFIG_SND_SUN4I_I2S is not set
+-CONFIG_SND_SUN4I_SPDIF=m
+-CONFIG_SND_SOC_TEGRA=m
+-# CONFIG_SND_SOC_TEGRA20_AC97 is not set
+-# CONFIG_SND_SOC_TEGRA20_DAS is not set
+-# CONFIG_SND_SOC_TEGRA20_I2S is not set
+-CONFIG_SND_SOC_TEGRA20_SPDIF=m
+-# CONFIG_SND_SOC_TEGRA30_AHUB is not set
+-# CONFIG_SND_SOC_TEGRA30_I2S is not set
+-CONFIG_SND_SOC_TEGRA_RT5640=m
+-CONFIG_SND_SOC_TEGRA_WM8753=m
+-CONFIG_SND_SOC_TEGRA_WM8903=m
+-# CONFIG_SND_SOC_TEGRA_WM9712 is not set
+-CONFIG_SND_SOC_TEGRA_TRIMSLICE=m
+-CONFIG_SND_SOC_TEGRA_ALC5632=m
+-CONFIG_SND_SOC_TEGRA_MAX98090=m
+-CONFIG_SND_SOC_TEGRA_RT5677=m
+-# CONFIG_SND_SOC_TEGRA_SGTL5000 is not set
+ # CONFIG_SND_SOC_XTFPGA_I2S is not set
+ # CONFIG_ZX_TDM is not set
+ CONFIG_SND_SOC_I2C_AND_SPI=m
+@@ -5852,7 +5299,6 @@
+ # CONFIG_SND_SOC_AK5386 is not set
+ # CONFIG_SND_SOC_AK5558 is not set
+ # CONFIG_SND_SOC_ALC5623 is not set
+-CONFIG_SND_SOC_ALC5632=m
+ # CONFIG_SND_SOC_BD28623 is not set
+ # CONFIG_SND_SOC_BT_SCO is not set
+ # CONFIG_SND_SOC_CS35L32 is not set
+@@ -5872,7 +5318,6 @@
+ # CONFIG_SND_SOC_CS43130 is not set
+ # CONFIG_SND_SOC_CS4349 is not set
+ # CONFIG_SND_SOC_CS53L30 is not set
+-CONFIG_SND_SOC_DMIC=m
+ CONFIG_SND_SOC_HDMI_CODEC=m
+ # CONFIG_SND_SOC_ES7134 is not set
+ # CONFIG_SND_SOC_ES7241 is not set
+@@ -5882,7 +5327,6 @@
+ CONFIG_SND_SOC_ES8328_SPI=m
+ # CONFIG_SND_SOC_GTM601 is not set
+ # CONFIG_SND_SOC_INNO_RK3036 is not set
+-CONFIG_SND_SOC_MAX98090=m
+ # CONFIG_SND_SOC_MAX98504 is not set
+ # CONFIG_SND_SOC_MAX9867 is not set
+ # CONFIG_SND_SOC_MAX98927 is not set
+@@ -5899,13 +5343,8 @@
+ # CONFIG_SND_SOC_PCM3168A_SPI is not set
+ # CONFIG_SND_SOC_PCM512x_I2C is not set
+ # CONFIG_SND_SOC_PCM512x_SPI is not set
+-CONFIG_SND_SOC_RL6231=m
+ # CONFIG_SND_SOC_RT5616 is not set
+ # CONFIG_SND_SOC_RT5631 is not set
+-CONFIG_SND_SOC_RT5640=m
+-CONFIG_SND_SOC_RT5645=m
+-CONFIG_SND_SOC_RT5677=m
+-CONFIG_SND_SOC_RT5677_SPI=m
+ CONFIG_SND_SOC_SGTL5000=m
+ # CONFIG_SND_SOC_SIMPLE_AMPLIFIER is not set
+ # CONFIG_SND_SOC_SIRF_AUDIO_CODEC is not set
+@@ -5934,8 +5373,6 @@
+ CONFIG_SND_SOC_TS3A227E=m
+ # CONFIG_SND_SOC_TSCS42XX is not set
+ # CONFIG_SND_SOC_TSCS454 is not set
+-CONFIG_SND_SOC_TWL4030=m
+-CONFIG_SND_SOC_TWL6040=m
+ # CONFIG_SND_SOC_WM8510 is not set
+ # CONFIG_SND_SOC_WM8523 is not set
+ # CONFIG_SND_SOC_WM8524 is not set
+@@ -5960,7 +5397,6 @@
+ # CONFIG_SND_SOC_WM8985 is not set
+ # CONFIG_SND_SOC_ZX_AUD96P22 is not set
+ # CONFIG_SND_SOC_MAX9759 is not set
+-CONFIG_SND_SOC_MC13783=m
+ # CONFIG_SND_SOC_MT6351 is not set
+ # CONFIG_SND_SOC_NAU8540 is not set
+ # CONFIG_SND_SOC_NAU8810 is not set
+@@ -6107,7 +5543,7 @@
+ # CONFIG_I2C_HID is not set
+ CONFIG_USB_OHCI_LITTLE_ENDIAN=y
+ CONFIG_USB_SUPPORT=y
+-CONFIG_USB_COMMON=y
++CONFIG_USB_COMMON=m
+ CONFIG_USB_ARCH_HAS_HCD=y
+ CONFIG_USB=m
+ CONFIG_USB_PCI=y
+@@ -6136,36 +5572,26 @@
+ CONFIG_USB_XHCI_PCI=m
+ CONFIG_USB_XHCI_PLATFORM=m
+ CONFIG_USB_XHCI_MVEBU=m
+-CONFIG_USB_XHCI_TEGRA=m
+ CONFIG_USB_EHCI_HCD=m
+ CONFIG_USB_EHCI_ROOT_HUB_TT=y
+ CONFIG_USB_EHCI_TT_NEWSCHED=y
+ CONFIG_USB_EHCI_PCI=m
+-CONFIG_USB_EHCI_MXC=m
+-CONFIG_USB_EHCI_HCD_OMAP=m
+ CONFIG_USB_EHCI_HCD_ORION=m
+-CONFIG_USB_EHCI_TEGRA=m
+-CONFIG_USB_EHCI_EXYNOS=m
+ CONFIG_USB_EHCI_HCD_PLATFORM=m
+ # CONFIG_USB_OXU210HP_HCD is not set
+ # CONFIG_USB_ISP116X_HCD is not set
+ # CONFIG_USB_FOTG210_HCD is not set
+ # CONFIG_USB_MAX3421_HCD is not set
+ CONFIG_USB_OHCI_HCD=m
+-CONFIG_USB_OHCI_HCD_OMAP3=m
+ CONFIG_USB_OHCI_HCD_PCI=m
+ # CONFIG_USB_OHCI_HCD_SSB is not set
+-CONFIG_USB_OHCI_EXYNOS=m
+ CONFIG_USB_OHCI_HCD_PLATFORM=m
+ # CONFIG_USB_UHCI_HCD is not set
+-CONFIG_USB_UHCI_SUPPORT_NON_PCI_HC=y
+-CONFIG_USB_UHCI_PLATFORM=y
+ CONFIG_USB_U132_HCD=m
+ # CONFIG_USB_SL811_HCD is not set
+ # CONFIG_USB_R8A66597_HCD is not set
+ CONFIG_USB_WHCI_HCD=m
+ CONFIG_USB_HWA_HCD=m
+-# CONFIG_USB_IMX21_HCD is not set
+ # CONFIG_USB_HCD_BCMA is not set
+ # CONFIG_USB_HCD_SSB is not set
+ # CONFIG_USB_HCD_TEST_MODE is not set
+@@ -6223,20 +5649,11 @@
+ #
+ # Platform Glue Layer
+ #
+-CONFIG_USB_MUSB_SUNXI=m
+-CONFIG_USB_MUSB_TUSB6010=m
+-CONFIG_USB_MUSB_OMAP2PLUS=m
+-CONFIG_USB_MUSB_AM35X=m
+-CONFIG_USB_MUSB_DSPS=m
+-CONFIG_USB_MUSB_AM335X_CHILD=m
+ 
+ #
+ # MUSB DMA mode
+ #
+ # CONFIG_MUSB_PIO_ONLY is not set
+-CONFIG_USB_INVENTRA_DMA=y
+-CONFIG_USB_TI_CPPI41_DMA=y
+-CONFIG_USB_TUSB_OMAP_DMA=y
+ CONFIG_USB_DWC3=m
+ # CONFIG_USB_DWC3_ULPI is not set
+ # CONFIG_USB_DWC3_HOST is not set
+@@ -6246,8 +5663,6 @@
+ #
+ # Platform Glue Driver Support
+ #
+-CONFIG_USB_DWC3_OMAP=m
+-CONFIG_USB_DWC3_EXYNOS=m
+ CONFIG_USB_DWC3_HAPS=m
+ CONFIG_USB_DWC3_OF_SIMPLE=m
+ CONFIG_USB_DWC2=m
+@@ -6368,11 +5783,8 @@
+ CONFIG_NOP_USB_XCEIV=m
+ CONFIG_AM335X_CONTROL_USB=m
+ CONFIG_AM335X_PHY_USB=m
+-CONFIG_TWL6030_USB=m
+ # CONFIG_USB_GPIO_VBUS is not set
+ # CONFIG_USB_ISP1301 is not set
+-CONFIG_USB_MXS_PHY=m
+-CONFIG_USB_TEGRA_PHY=m
+ CONFIG_USB_ULPI=y
+ CONFIG_USB_ULPI_VIEWPORT=y
+ CONFIG_USB_GADGET=m
+@@ -6386,7 +5798,6 @@
+ #
+ # USB Peripheral Controller
+ #
+-# CONFIG_USB_FSL_USB2 is not set
+ # CONFIG_USB_FUSB300 is not set
+ # CONFIG_USB_FOTG210_UDC is not set
+ # CONFIG_USB_GR_UDC is not set
+@@ -6491,7 +5902,6 @@
+ # MMC/SD/SDIO Host Controller Drivers
+ #
+ # CONFIG_MMC_DEBUG is not set
+-CONFIG_MMC_ARMMMCI=m
+ CONFIG_MMC_SDHCI=m
+ CONFIG_MMC_SDHCI_IO_ACCESSORS=y
+ CONFIG_MMC_SDHCI_PCI=m
+@@ -6499,22 +5909,11 @@
+ CONFIG_MMC_SDHCI_PLTFM=m
+ # CONFIG_MMC_SDHCI_OF_ARASAN is not set
+ # CONFIG_MMC_SDHCI_OF_AT91 is not set
+-# CONFIG_MMC_SDHCI_OF_ESDHC is not set
+ # CONFIG_MMC_SDHCI_OF_DWCMSHC is not set
+ # CONFIG_MMC_SDHCI_CADENCE is not set
+-CONFIG_MMC_SDHCI_ESDHC_IMX=m
+ CONFIG_MMC_SDHCI_DOVE=m
+-CONFIG_MMC_SDHCI_TEGRA=m
+-CONFIG_MMC_SDHCI_S3C=m
+ CONFIG_MMC_SDHCI_PXAV3=m
+-# CONFIG_MMC_SDHCI_S3C_DMA is not set
+ # CONFIG_MMC_SDHCI_F_SDH30 is not set
+-CONFIG_MMC_SDHCI_IPROC=m
+-# CONFIG_MMC_MESON_GX is not set
+-CONFIG_MMC_MESON_MX_SDIO=m
+-CONFIG_MMC_OMAP=m
+-CONFIG_MMC_OMAP_HS=m
+-# CONFIG_MMC_MXC is not set
+ CONFIG_MMC_TIFM_SD=m
+ CONFIG_MMC_MVSDIO=m
+ CONFIG_MMC_SPI=m
+@@ -6527,17 +5926,13 @@
+ # CONFIG_MMC_DW_HI3798CV200 is not set
+ # CONFIG_MMC_DW_K3 is not set
+ # CONFIG_MMC_DW_PCI is not set
+-CONFIG_MMC_DW_ROCKCHIP=m
+ CONFIG_MMC_VUB300=m
+ CONFIG_MMC_USHC=m
+-CONFIG_MMC_WMT=m
+ # CONFIG_MMC_USDHI6ROL0 is not set
+ CONFIG_MMC_REALTEK_PCI=m
+ CONFIG_MMC_REALTEK_USB=m
+-CONFIG_MMC_SUNXI=m
+ CONFIG_MMC_CQHCI=m
+ CONFIG_MMC_TOSHIBA_PCI=m
+-CONFIG_MMC_BCM2835=m
+ # CONFIG_MMC_MTK is not set
+ # CONFIG_MMC_SDHCI_XENON is not set
+ CONFIG_MMC_SDHCI_OMAP=m
+@@ -6687,7 +6082,6 @@
+ #
+ # CONFIG_RTC_DRV_ABB5ZES3 is not set
+ # CONFIG_RTC_DRV_ABX80X is not set
+-CONFIG_RTC_DRV_AC100=y
+ CONFIG_RTC_DRV_AS3722=y
+ CONFIG_RTC_DRV_DS1307=y
+ # CONFIG_RTC_DRV_DS1307_CENTURY is not set
+@@ -6758,7 +6152,6 @@
+ # CONFIG_RTC_DRV_DS1742 is not set
+ # CONFIG_RTC_DRV_DS2404 is not set
+ CONFIG_RTC_DRV_DA9052=y
+-CONFIG_RTC_DRV_EFI=y
+ # CONFIG_RTC_DRV_STK17TA8 is not set
+ # CONFIG_RTC_DRV_M48T86 is not set
+ # CONFIG_RTC_DRV_M48T35 is not set
+@@ -6773,22 +6166,10 @@
+ #
+ # on-CPU RTC drivers
+ #
+-CONFIG_RTC_DRV_IMXDI=y
+-CONFIG_RTC_DRV_OMAP=y
+-CONFIG_HAVE_S3C_RTC=y
+-# CONFIG_RTC_DRV_S3C is not set
+-CONFIG_RTC_DRV_PL030=y
+-CONFIG_RTC_DRV_PL031=y
+-CONFIG_RTC_DRV_VT8500=y
+-CONFIG_RTC_DRV_SUN6I=y
+-CONFIG_RTC_DRV_SUNXI=y
+ CONFIG_RTC_DRV_MV=y
+ CONFIG_RTC_DRV_ARMADA38X=y
+ # CONFIG_RTC_DRV_FTRTC010 is not set
+ CONFIG_RTC_DRV_MC13XXX=m
+-CONFIG_RTC_DRV_TEGRA=y
+-CONFIG_RTC_DRV_MXC=y
+-# CONFIG_RTC_DRV_MXC_V2 is not set
+ CONFIG_RTC_DRV_SNVS=y
+ # CONFIG_RTC_DRV_R7301 is not set
+ 
+@@ -6804,34 +6185,17 @@
+ #
+ CONFIG_ASYNC_TX_ENABLE_CHANNEL_SWITCH=y
+ CONFIG_DMA_ENGINE=y
+-CONFIG_DMA_VIRTUAL_CHANNELS=y
+ CONFIG_DMA_OF=y
+ # CONFIG_ALTERA_MSGDMA is not set
+-CONFIG_AMBA_PL08X=y
+-# CONFIG_AXI_DMAC is not set
+-CONFIG_DMA_BCM2835=y
+-CONFIG_DMA_SUN4I=y
+-CONFIG_DMA_SUN6I=m
+ # CONFIG_DW_AXI_DMAC is not set
+ # CONFIG_FSL_EDMA is not set
+-CONFIG_IMX_DMA=y
+-CONFIG_IMX_SDMA=y
+ # CONFIG_INTEL_IDMA64 is not set
+ CONFIG_MV_XOR=y
+-CONFIG_MXS_DMA=y
+-CONFIG_MX3_IPU=y
+-CONFIG_MX3_IPU_IRQS=4
+ # CONFIG_NBPFAXI_DMA is not set
+-CONFIG_PL330_DMA=y
+-CONFIG_TEGRA20_APB_DMA=y
+ # CONFIG_QCOM_HIDMA_MGMT is not set
+ # CONFIG_QCOM_HIDMA is not set
+ # CONFIG_DW_DMAC is not set
+ # CONFIG_DW_DMAC_PCI is not set
+-CONFIG_TI_CPPI41=m
+-CONFIG_TI_EDMA=y
+-CONFIG_DMA_OMAP=y
+-CONFIG_TI_DMA_CROSSBAR=y
+ 
+ #
+ # DMA Clients
+@@ -6857,7 +6221,6 @@
+ CONFIG_UIO_NETX=m
+ # CONFIG_UIO_PRUSS is not set
+ CONFIG_UIO_MF624=m
+-# CONFIG_VFIO is not set
+ CONFIG_VIRT_DRIVERS=y
+ CONFIG_VIRTIO=m
+ CONFIG_VIRTIO_MENU=y
+@@ -6891,7 +6254,6 @@
+ # CONFIG_XEN_PVCALLS_BACKEND is not set
+ CONFIG_XEN_SCSI_BACKEND=m
+ CONFIG_XEN_PRIVCMD=m
+-CONFIG_XEN_EFI=y
+ CONFIG_XEN_AUTO_XLATE=y
+ CONFIG_STAGING=y
+ # CONFIG_PRISM2_USB is not set
+@@ -6977,7 +6339,6 @@
+ CONFIG_SPEAKUP_SYNTH_SPKOUT=m
+ CONFIG_SPEAKUP_SYNTH_TXPRT=m
+ CONFIG_SPEAKUP_SYNTH_DUMMY=m
+-# CONFIG_MFD_NVEC is not set
+ # CONFIG_STAGING_MEDIA is not set
+ 
+ #
+@@ -7000,10 +6361,6 @@
+ # CONFIG_MOST is not set
+ # CONFIG_KS7010 is not set
+ # CONFIG_GREYBUS is not set
+-CONFIG_BCM_VIDEOCORE=y
+-CONFIG_BCM2835_VCHIQ=m
+-CONFIG_SND_BCM2835=m
+-# CONFIG_VIDEO_BCM2835 is not set
+ # CONFIG_PI433 is not set
+ # CONFIG_MTK_MMC is not set
+ 
+@@ -7025,10 +6382,6 @@
+ #
+ # Common Clock Framework
+ #
+-CONFIG_ICST=y
+-CONFIG_COMMON_CLK_VERSATILE=y
+-CONFIG_CLK_SP810=y
+-CONFIG_CLK_VEXPRESS_OSC=y
+ # CONFIG_CLK_HSDK is not set
+ CONFIG_COMMON_CLK_MAX77686=m
+ # CONFIG_COMMON_CLK_MAX9485 is not set
+@@ -7046,9 +6399,6 @@
+ CONFIG_COMMON_CLK_PALMAS=m
+ # CONFIG_COMMON_CLK_PWM is not set
+ # CONFIG_COMMON_CLK_VC5 is not set
+-CONFIG_COMMON_CLK_AMLOGIC=y
+-CONFIG_COMMON_CLK_REGMAP_MESON=y
+-CONFIG_COMMON_CLK_MESON8B=y
+ CONFIG_MVEBU_CLK_COMMON=y
+ CONFIG_MVEBU_CLK_CPU=y
+ CONFIG_MVEBU_CLK_COREDIV=y
+@@ -7058,23 +6408,6 @@
+ CONFIG_ARMADA_39X_CLK=y
+ CONFIG_ARMADA_XP_CLK=y
+ CONFIG_DOVE_CLK=y
+-CONFIG_COMMON_CLK_SAMSUNG=y
+-CONFIG_EXYNOS_AUDSS_CLK_CON=y
+-CONFIG_SUNXI_CCU=y
+-CONFIG_SUN4I_A10_CCU=y
+-CONFIG_SUN5I_CCU=y
+-CONFIG_SUN6I_A31_CCU=y
+-CONFIG_SUN8I_A23_CCU=y
+-CONFIG_SUN8I_A33_CCU=y
+-CONFIG_SUN8I_A83T_CCU=y
+-CONFIG_SUN8I_H3_CCU=y
+-CONFIG_SUN8I_V3S_CCU=y
+-CONFIG_SUN8I_DE2_CCU=y
+-CONFIG_SUN8I_R40_CCU=y
+-CONFIG_SUN9I_A80_CCU=y
+-CONFIG_SUN8I_R_CCU=y
+-CONFIG_TEGRA_CLK_EMC=y
+-CONFIG_COMMON_CLK_TI_ADPLL=y
+ # CONFIG_HWSPINLOCK is not set
+ 
+ #
+@@ -7082,42 +6415,19 @@
+ #
+ CONFIG_TIMER_OF=y
+ CONFIG_TIMER_PROBE=y
+-CONFIG_OMAP_DM_TIMER=y
+ CONFIG_CLKSRC_MMIO=y
+-CONFIG_BCM2835_TIMER=y
+-CONFIG_DW_APB_TIMER=y
+-CONFIG_DW_APB_TIMER_OF=y
+-CONFIG_ROCKCHIP_TIMER=y
+ CONFIG_ARMADA_370_XP_TIMER=y
+-CONFIG_MESON6_TIMER=y
+ CONFIG_ORION_TIMER=y
+-CONFIG_SUN4I_TIMER=y
+-CONFIG_SUN5I_HSTIMER=y
+-CONFIG_TEGRA_TIMER=y
+-CONFIG_VT8500_TIMER=y
+-CONFIG_CLKSRC_TI_32K=y
+ CONFIG_ARM_ARCH_TIMER=y
+ CONFIG_ARM_ARCH_TIMER_EVTSTREAM=y
+ CONFIG_ARM_GLOBAL_TIMER=y
+ CONFIG_ARM_TIMER_SP804=y
+ CONFIG_CLKSRC_ARM_GLOBAL_TIMER_SCHED_CLOCK=y
+-CONFIG_CLKSRC_EXYNOS_MCT=y
+-CONFIG_CLKSRC_SAMSUNG_PWM=y
+ CONFIG_CLKSRC_VERSATILE=y
+-CONFIG_CLKSRC_IMX_GPT=y
+ CONFIG_MAILBOX=y
+-# CONFIG_ARM_MHU is not set
+-# CONFIG_IMX_MBOX is not set
+ # CONFIG_PLATFORM_MHU is not set
+-CONFIG_PL320_MBOX=y
+-CONFIG_OMAP2PLUS_MBOX=y
+-CONFIG_OMAP_MBOX_KFIFO_SIZE=256
+-# CONFIG_ROCKCHIP_MBOX is not set
+ # CONFIG_ALTERA_MBOX is not set
+-CONFIG_BCM2835_MBOX=y
+ # CONFIG_MAILBOX_TEST is not set
+-# CONFIG_TEGRA_HSP_MBOX is not set
+-CONFIG_IOMMU_API=y
+ CONFIG_IOMMU_SUPPORT=y
+ 
+ #
+@@ -7126,14 +6436,6 @@
+ # CONFIG_IOMMU_IO_PGTABLE_LPAE is not set
+ # CONFIG_IOMMU_IO_PGTABLE_ARMV7S is not set
+ # CONFIG_IOMMU_DEBUGFS is not set
+-# CONFIG_IOMMU_DEFAULT_PASSTHROUGH is not set
+-CONFIG_IOMMU_IOVA=m
+-CONFIG_OF_IOMMU=y
+-CONFIG_OMAP_IOMMU=y
+-# CONFIG_OMAP_IOMMU_DEBUG is not set
+-CONFIG_ROCKCHIP_IOMMU=y
+-CONFIG_TEGRA_IOMMU_SMMU=y
+-# CONFIG_EXYNOS_IOMMU is not set
+ # CONFIG_ARM_SMMU is not set
+ 
+ #
+@@ -7155,14 +6457,10 @@
+ #
+ # Amlogic SoC drivers
+ #
+-CONFIG_MESON_GX_SOCINFO=y
+-CONFIG_MESON_GX_PM_DOMAINS=y
+-CONFIG_MESON_MX_SOCINFO=y
+ 
+ #
+ # Broadcom SoC drivers
+ #
+-CONFIG_RASPBERRYPI_POWER=y
+ # CONFIG_SOC_BRCMSTB is not set
+ 
+ #
+@@ -7176,20 +6474,6 @@
+ #
+ # Qualcomm SoC drivers
+ #
+-CONFIG_ROCKCHIP_GRF=y
+-CONFIG_ROCKCHIP_PM_DOMAINS=y
+-CONFIG_SOC_SAMSUNG=y
+-CONFIG_EXYNOS_PMU=y
+-CONFIG_EXYNOS_PMU_ARM_DRIVERS=y
+-CONFIG_EXYNOS_PM_DOMAINS=y
+-CONFIG_SUNXI_SRAM=y
+-# CONFIG_ARCH_TEGRA_2x_SOC is not set
+-# CONFIG_ARCH_TEGRA_3x_SOC is not set
+-# CONFIG_ARCH_TEGRA_114_SOC is not set
+-CONFIG_ARCH_TEGRA_124_SOC=y
+-CONFIG_SOC_TEGRA_FUSE=y
+-CONFIG_SOC_TEGRA_FLOWCTRL=y
+-CONFIG_SOC_TEGRA_PMC=y
+ # CONFIG_SOC_TI is not set
+ 
+ #
+@@ -7210,9 +6494,6 @@
+ #
+ # DEVFREQ Drivers
+ #
+-# CONFIG_ARM_EXYNOS_BUS_DEVFREQ is not set
+-CONFIG_ARM_TEGRA_DEVFREQ=m
+-# CONFIG_ARM_RK3399_DMC_DEVFREQ is not set
+ # CONFIG_PM_DEVFREQ_EVENT is not set
+ CONFIG_EXTCON=y
+ 
+@@ -7228,16 +6509,7 @@
+ CONFIG_EXTCON_USB_GPIO=m
+ # CONFIG_EXTCON_USBC_CROS_EC is not set
+ CONFIG_MEMORY=y
+-# CONFIG_ARM_PL172_MPMC is not set
+-CONFIG_TI_EMIF=m
+-CONFIG_OMAP_GPMC=y
+-# CONFIG_OMAP_GPMC_DEBUG is not set
+-# CONFIG_TI_EMIF_SRAM is not set
+ CONFIG_MVEBU_DEVBUS=y
+-CONFIG_SAMSUNG_MC=y
+-CONFIG_EXYNOS_SROM=y
+-CONFIG_TEGRA_MC=y
+-CONFIG_TEGRA124_EMC=y
+ CONFIG_IIO=m
+ CONFIG_IIO_BUFFER=y
+ # CONFIG_IIO_BUFFER_CB is not set
+@@ -7302,11 +6574,9 @@
+ CONFIG_AXP288_ADC=m
+ # CONFIG_CC10001_ADC is not set
+ # CONFIG_ENVELOPE_DETECTOR is not set
+-CONFIG_EXYNOS_ADC=m
+ # CONFIG_HI8435 is not set
+ # CONFIG_HX711 is not set
+ # CONFIG_INA2XX_ADC is not set
+-# CONFIG_IMX7D_ADC is not set
+ # CONFIG_LTC2471 is not set
+ # CONFIG_LTC2485 is not set
+ # CONFIG_LTC2497 is not set
+@@ -7317,12 +6587,9 @@
+ # CONFIG_MAX9611 is not set
+ # CONFIG_MCP320X is not set
+ # CONFIG_MCP3422 is not set
+-CONFIG_MESON_SARADC=m
+ # CONFIG_NAU7802 is not set
+ # CONFIG_PALMAS_GPADC is not set
+-CONFIG_ROCKCHIP_SARADC=m
+ # CONFIG_SD_ADC_MODULATOR is not set
+-# CONFIG_SUN4I_GPADC is not set
+ # CONFIG_TI_ADC081C is not set
+ # CONFIG_TI_ADC0832 is not set
+ # CONFIG_TI_ADC084S021 is not set
+@@ -7624,24 +6891,12 @@
+ # CONFIG_VME_BUS is not set
+ CONFIG_PWM=y
+ CONFIG_PWM_SYSFS=y
+-CONFIG_PWM_BCM2835=m
+ # CONFIG_PWM_CROS_EC is not set
+ # CONFIG_PWM_FSL_FTM is not set
+-CONFIG_PWM_IMX=m
+-CONFIG_PWM_MESON=m
+-CONFIG_PWM_OMAP_DMTIMER=m
+ # CONFIG_PWM_PCA9685 is not set
+-CONFIG_PWM_ROCKCHIP=m
+-CONFIG_PWM_SAMSUNG=m
+ # CONFIG_PWM_STMPE is not set
+-CONFIG_PWM_SUN4I=m
+-CONFIG_PWM_TEGRA=m
+-CONFIG_PWM_TIECAP=m
+-CONFIG_PWM_TIEHRPWM=m
+-CONFIG_PWM_TIPWMSS=y
+ CONFIG_PWM_TWL=m
+ CONFIG_PWM_TWL_LED=m
+-CONFIG_PWM_VT8500=m
+ 
+ #
+ # IRQ chip support
+@@ -7649,25 +6904,10 @@
+ CONFIG_IRQCHIP=y
+ CONFIG_ARM_GIC=y
+ CONFIG_ARM_GIC_MAX_NR=1
+-CONFIG_ARM_GIC_V2M=y
+-CONFIG_GIC_NON_BANKED=y
+-CONFIG_ARM_GIC_V3=y
+-CONFIG_ARM_GIC_V3_ITS=y
+-CONFIG_ARM_GIC_V3_ITS_PCI=y
+ CONFIG_ARMADA_370_XP_IRQ=y
+-CONFIG_OMAP_IRQCHIP=y
+ CONFIG_ORION_IRQCHIP=y
+-# CONFIG_TS4800_IRQ is not set
+-CONFIG_IRQ_CROSSBAR=y
+-CONFIG_PARTITION_PERCPU=y
+-CONFIG_MESON_IRQ_GPIO=y
+ # CONFIG_IPACK_BUS is not set
+-CONFIG_ARCH_HAS_RESET_CONTROLLER=y
+ CONFIG_RESET_CONTROLLER=y
+-CONFIG_RESET_MESON=y
+-# CONFIG_RESET_MESON_AUDIO_ARB is not set
+-CONFIG_RESET_SIMPLE=y
+-CONFIG_RESET_SUNXI=y
+ # CONFIG_RESET_TI_SYSCON is not set
+ # CONFIG_FMC is not set
+ 
+@@ -7675,11 +6915,6 @@
+ # PHY Subsystem
+ #
+ CONFIG_GENERIC_PHY=y
+-CONFIG_PHY_SUN4I_USB=m
+-CONFIG_PHY_SUN9I_USB=m
+-CONFIG_PHY_MESON8B_USB2=y
+-CONFIG_PHY_MESON_GXL_USB2=y
+-CONFIG_PHY_MESON_GXL_USB3=y
+ # CONFIG_BCM_KONA_USB2_PHY is not set
+ CONFIG_ARMADA375_USBCLUSTER_PHY=y
+ # CONFIG_PHY_MVEBU_CP110_COMPHY is not set
+@@ -7690,28 +6925,8 @@
+ # CONFIG_PHY_MAPPHONE_MDM6600 is not set
+ # CONFIG_PHY_QCOM_USB_HS is not set
+ # CONFIG_PHY_QCOM_USB_HSIC is not set
+-CONFIG_PHY_ROCKCHIP_DP=m
+-CONFIG_PHY_ROCKCHIP_EMMC=m
+-# CONFIG_PHY_ROCKCHIP_INNO_USB2 is not set
+-# CONFIG_PHY_ROCKCHIP_PCIE is not set
+-# CONFIG_PHY_ROCKCHIP_TYPEC is not set
+-CONFIG_PHY_ROCKCHIP_USB=m
+-CONFIG_PHY_EXYNOS_DP_VIDEO=m
+-CONFIG_PHY_EXYNOS_MIPI_VIDEO=m
+-# CONFIG_PHY_EXYNOS_PCIE is not set
+ CONFIG_PHY_SAMSUNG_USB2=m
+-CONFIG_PHY_EXYNOS4210_USB2=y
+-CONFIG_PHY_EXYNOS4X12_USB2=y
+-CONFIG_PHY_EXYNOS5250_USB2=y
+-CONFIG_PHY_EXYNOS5_USBDRD=m
+-CONFIG_PHY_EXYNOS5250_SATA=m
+-CONFIG_PHY_TEGRA_XUSB=m
+-# CONFIG_PHY_DM816X_USB is not set
+-CONFIG_OMAP_CONTROL_PHY=m
+-CONFIG_OMAP_USB2=m
+-CONFIG_TI_PIPE3=m
+ # CONFIG_PHY_TUSB1210 is not set
+-CONFIG_TWL4030_USB=m
+ # CONFIG_POWERCAP is not set
+ # CONFIG_MCB is not set
+ 
+@@ -7732,12 +6947,6 @@
+ # CONFIG_ANDROID_BINDER_IPC_SELFTEST is not set
+ # CONFIG_DAX is not set
+ CONFIG_NVMEM=y
+-# CONFIG_NVMEM_IMX_IIM is not set
+-# CONFIG_NVMEM_IMX_OCOTP is not set
+-CONFIG_ROCKCHIP_EFUSE=m
+-CONFIG_NVMEM_SUNXI_SID=m
+-CONFIG_MESON_MX_EFUSE=m
+-# CONFIG_NVMEM_SNVS_LPGPR is not set
+ 
+ #
+ # HW tracing support
+@@ -7887,7 +7096,6 @@
+ CONFIG_TMPFS_XATTR=y
+ CONFIG_MEMFD_CREATE=y
+ CONFIG_CONFIGFS_FS=m
+-CONFIG_EFIVAR_FS=m
+ CONFIG_MISC_FILESYSTEMS=y
+ CONFIG_ORANGEFS_FS=m
+ CONFIG_ADFS_FS=m
+@@ -8107,8 +7315,7 @@
+ # CONFIG_HARDENED_USERCOPY_PAGESPAN is not set
+ CONFIG_FORTIFY_SOURCE=y
+ # CONFIG_STATIC_USERMODEHELPER is not set
+-CONFIG_LOCK_DOWN_KERNEL=y
+-CONFIG_LOCK_DOWN_IN_EFI_SECURE_BOOT=y
++# CONFIG_LOCK_DOWN_KERNEL is not set
+ CONFIG_SECURITY_SELINUX=y
+ # CONFIG_SECURITY_SELINUX_BOOTPARAM is not set
+ # CONFIG_SECURITY_SELINUX_DISABLE is not set
+@@ -8135,7 +7342,6 @@
+ # CONFIG_INTEGRITY_TRUSTED_KEYRING is not set
+ CONFIG_INTEGRITY_AUDIT=y
+ # CONFIG_IMA is not set
+-# CONFIG_IMA_KEYRINGS_PERMIT_SIGNED_BY_BUILTIN_OR_SECONDARY is not set
+ # CONFIG_EVM is not set
+ # CONFIG_DEFAULT_SECURITY_SELINUX is not set
+ # CONFIG_DEFAULT_SECURITY_TOMOYO is not set
+@@ -8298,16 +7504,6 @@
+ CONFIG_CRYPTO_HASH_INFO=y
+ CONFIG_CRYPTO_HW=y
+ CONFIG_CRYPTO_DEV_MARVELL_CESA=m
+-# CONFIG_CRYPTO_DEV_FSL_CAAM is not set
+-# CONFIG_CRYPTO_DEV_OMAP is not set
+-# CONFIG_CRYPTO_DEV_SAHARA is not set
+-# CONFIG_CRYPTO_DEV_MXC_SCC is not set
+-# CONFIG_CRYPTO_DEV_EXYNOS_RNG is not set
+-# CONFIG_CRYPTO_DEV_S5P is not set
+-# CONFIG_CRYPTO_DEV_MXS_DCP is not set
+-CONFIG_CRYPTO_DEV_SUN4I_SS=m
+-# CONFIG_CRYPTO_DEV_SUN4I_SS_PRNG is not set
+-# CONFIG_CRYPTO_DEV_ROCKCHIP is not set
+ CONFIG_CRYPTO_DEV_CHELSIO=m
+ # CONFIG_CHELSIO_IPSEC_INLINE is not set
+ CONFIG_CRYPTO_DEV_VIRTIO=m
+@@ -8323,13 +7519,10 @@
+ # Certificates for signature checking
+ #
+ CONFIG_SYSTEM_TRUSTED_KEYRING=y
+-CONFIG_SYSTEM_TRUSTED_KEYS="debian/certs/debian-uefi-certs.pem"
++CONFIG_SYSTEM_TRUSTED_KEYS=""
+ # CONFIG_SYSTEM_EXTRA_CERTIFICATE is not set
+-CONFIG_SECONDARY_TRUSTED_KEYRING=y
+-CONFIG_SYSTEM_BLACKLIST_KEYRING=y
+-CONFIG_SYSTEM_BLACKLIST_HASH_LIST=""
+-CONFIG_EFI_SIGNATURE_LIST_PARSER=y
+-CONFIG_LOAD_UEFI_KEYS=y
++# CONFIG_SECONDARY_TRUSTED_KEYRING is not set
++# CONFIG_SYSTEM_BLACKLIST_KEYRING is not set
+ CONFIG_BINARY_PRINTF=y
+ 
+ #
+@@ -8343,7 +7536,6 @@
+ CONFIG_GENERIC_STRNLEN_USER=y
+ CONFIG_GENERIC_NET_UTILS=y
+ CONFIG_GENERIC_PCI_IOMAP=y
+-CONFIG_STMP_DEVICE=y
+ CONFIG_ARCH_USE_CMPXCHG_LOCKREF=y
+ CONFIG_CRC_CCITT=m
+ CONFIG_CRC16=m
+@@ -8397,8 +7589,8 @@
+ CONFIG_TEXTSEARCH_FSM=m
+ CONFIG_ASSOCIATIVE_ARRAY=y
+ CONFIG_HAS_IOMEM=y
++CONFIG_HAS_IOPORT_MAP=y
+ CONFIG_HAS_DMA=y
+-CONFIG_NEED_SG_DMA_LENGTH=y
+ CONFIG_NEED_DMA_MAP_STATE=y
+ CONFIG_ARCH_DMA_ADDR_T_64BIT=y
+ CONFIG_HAVE_GENERIC_DMA_COHERENT=y
+@@ -8421,12 +7613,10 @@
+ CONFIG_SIGNATURE=y
+ CONFIG_LIBFDT=y
+ CONFIG_OID_REGISTRY=y
+-CONFIG_UCS2_STRING=y
+ CONFIG_FONT_SUPPORT=y
+ # CONFIG_FONTS is not set
+ CONFIG_FONT_8x8=y
+ CONFIG_FONT_8x16=y
+-CONFIG_SG_SPLIT=y
+ CONFIG_SG_POOL=y
+ CONFIG_ARCH_HAS_SG_CHAIN=y
+ CONFIG_SBITMAP=y
+@@ -8481,8 +7671,7 @@
+ # CONFIG_DEBUG_PAGE_REF is not set
+ # CONFIG_DEBUG_RODATA_TEST is not set
+ # CONFIG_DEBUG_OBJECTS is not set
+-# CONFIG_SLUB_DEBUG_ON is not set
+-# CONFIG_SLUB_STATS is not set
++# CONFIG_DEBUG_SLAB is not set
+ CONFIG_HAVE_DEBUG_KMEMLEAK=y
+ # CONFIG_DEBUG_KMEMLEAK is not set
+ # CONFIG_DEBUG_STACK_USAGE is not set
+@@ -8653,7 +7842,6 @@
+ CONFIG_OLD_MCOUNT=y
+ # CONFIG_DEBUG_USER is not set
+ # CONFIG_DEBUG_LL is not set
+-CONFIG_DEBUG_IMX_UART_PORT=1
+ CONFIG_DEBUG_LL_INCLUDE="mach/debug-macro.S"
+ CONFIG_UNCOMPRESS_INCLUDE="debug/uncompress.h"
+ # CONFIG_ARM_KPROBES_TEST is not set
+diff --git a/debian/build/build_armhf_none_armmp/.config b/debian/build/build_armhf_none_armmp/.config
+index e997934..69288eb 100644
+--- a/debian/build/build_armhf_none_armmp/.config
++++ b/debian/build/build_armhf_none_armmp/.config
+@@ -1772,9 +1772,9 @@
+ CONFIG_MTD=y
+ # CONFIG_MTD_TESTS is not set
+ # CONFIG_MTD_REDBOOT_PARTS is not set
+-# CONFIG_MTD_CMDLINE_PARTS is not set
++CONFIG_MTD_CMDLINE_PARTS=y
+ # CONFIG_MTD_AFS_PARTS is not set
+-CONFIG_MTD_OF_PARTS=m
++CONFIG_MTD_OF_PARTS=y
+ CONFIG_MTD_AR7_PARTS=m
+ 
+ #
diff --git a/patch/0110-mtd-rawnand-marvell-use-regmap_update_bits-for-sysco.patch b/patch/0110-mtd-rawnand-marvell-use-regmap_update_bits-for-sysco.patch
new file mode 100644
index 0000000..7ff2321
--- /dev/null
+++ b/patch/0110-mtd-rawnand-marvell-use-regmap_update_bits-for-sysco.patch
@@ -0,0 +1,68 @@
+From 751561d8c3aaa4d15fdb270171e780d5e8a620a1 Mon Sep 17 00:00:00 2001
+From: Thomas Petazzoni <thomas.petazzoni@bootlin.com>
+Date: Thu, 2 Aug 2018 10:56:25 +0200
+Subject: [PATCH] mtd: rawnand: marvell: use regmap_update_bits() for syscon
+ access
+
+The marvell_nfc_init() function fiddles with some bits of a system
+controller on Armada 7K/8K. However, it does a read/modify/write
+sequence on GENCONF_CLK_GATING_CTRL and GENCONF_ND_CLK_CTRL, which
+isn't safe from a concurrency point of view, as the regmap lock isn't
+taken accross the read/modify/write sequence. To solve this issue, use
+regmap_update_bits().
+
+While at it, since the "reg" variable is no longer needed for the
+read/modify/write sequences, get rid of it for the regmap_write() to
+GENCONF_SOC_DEVICE_MUX, and directly pass the value to be written as
+argument.
+
+Fixes: 02f26ecf8c772 ("mtd: nand: add reworked Marvell NAND controller driver")
+Signed-off-by: Thomas Petazzoni <thomas.petazzoni@bootlin.com>
+Signed-off-by: Miquel Raynal <miquel.raynal@bootlin.com>
+---
+ drivers/mtd/nand/raw/marvell_nand.c | 23 +++++++++++------------
+ 1 file changed, 11 insertions(+), 12 deletions(-)
+
+diff --git a/drivers/mtd/nand/raw/marvell_nand.c b/drivers/mtd/nand/raw/marvell_nand.c
+index 65adcbb..5c443c1 100644
+--- a/drivers/mtd/nand/raw/marvell_nand.c
++++ b/drivers/mtd/nand/raw/marvell_nand.c
+@@ -2689,24 +2689,23 @@ static int marvell_nfc_init(struct marvell_nfc *nfc)
+ 		struct regmap *sysctrl_base =
+ 			syscon_regmap_lookup_by_phandle(np,
+ 							"marvell,system-controller");
+-		u32 reg;
+ 
+ 		if (IS_ERR(sysctrl_base))
+ 			return PTR_ERR(sysctrl_base);
+ 
+-		reg = GENCONF_SOC_DEVICE_MUX_NFC_EN |
+-		      GENCONF_SOC_DEVICE_MUX_ECC_CLK_RST |
+-		      GENCONF_SOC_DEVICE_MUX_ECC_CORE_RST |
+-		      GENCONF_SOC_DEVICE_MUX_NFC_INT_EN;
+-		regmap_write(sysctrl_base, GENCONF_SOC_DEVICE_MUX, reg);
++		regmap_write(sysctrl_base, GENCONF_SOC_DEVICE_MUX,
++			     GENCONF_SOC_DEVICE_MUX_NFC_EN |
++			     GENCONF_SOC_DEVICE_MUX_ECC_CLK_RST |
++			     GENCONF_SOC_DEVICE_MUX_ECC_CORE_RST |
++			     GENCONF_SOC_DEVICE_MUX_NFC_INT_EN);
+ 
+-		regmap_read(sysctrl_base, GENCONF_CLK_GATING_CTRL, &reg);
+-		reg |= GENCONF_CLK_GATING_CTRL_ND_GATE;
+-		regmap_write(sysctrl_base, GENCONF_CLK_GATING_CTRL, reg);
++		regmap_update_bits(sysctrl_base, GENCONF_CLK_GATING_CTRL,
++				   GENCONF_CLK_GATING_CTRL_ND_GATE,
++				   GENCONF_CLK_GATING_CTRL_ND_GATE);
+ 
+-		regmap_read(sysctrl_base, GENCONF_ND_CLK_CTRL, &reg);
+-		reg |= GENCONF_ND_CLK_CTRL_EN;
+-		regmap_write(sysctrl_base, GENCONF_ND_CLK_CTRL, reg);
++		regmap_update_bits(sysctrl_base, GENCONF_ND_CLK_CTRL,
++				   GENCONF_ND_CLK_CTRL_EN,
++				   GENCONF_ND_CLK_CTRL_EN);
+ 	}
+ 
+ 	/* Configure the DMA if appropriate */
+-- 
+2.7.4
+
diff --git a/patch/0111-mtd-rawnand-marvell-document-a-bit-more-the-driver.patch b/patch/0111-mtd-rawnand-marvell-document-a-bit-more-the-driver.patch
new file mode 100644
index 0000000..a221e46
--- /dev/null
+++ b/patch/0111-mtd-rawnand-marvell-document-a-bit-more-the-driver.patch
@@ -0,0 +1,97 @@
+From 508dbcf08f6904be18dd41a7e853bee45f293bf3 Mon Sep 17 00:00:00 2001
+From: Miquel Raynal <miquel.raynal@bootlin.com>
+Date: Sun, 5 Aug 2018 16:52:56 +0200
+Subject: [PATCH] mtd: rawnand: marvell: document a bit more the driver
+
+A stale document about the old pxa3cc_nand.c driver is available in
+Documentation/mtd/nand/. Rewrite the parts that explain the IP itself
+and some non-trivial choices made in the driver directly in
+marvell_nand.c to then be able to remove this file.
+
+Signed-off-by: Miquel Raynal <miquel.raynal@bootlin.com>
+Reviewed-by: Boris Brezillon <boris.brezillon@bootlin.com>
+---
+ drivers/mtd/nand/raw/marvell_nand.c | 67 +++++++++++++++++++++++++++++++++++++
+ 1 file changed, 67 insertions(+)
+
+diff --git a/drivers/mtd/nand/raw/marvell_nand.c b/drivers/mtd/nand/raw/marvell_nand.c
+index 5c443c1..29906c9 100644
+--- a/drivers/mtd/nand/raw/marvell_nand.c
++++ b/drivers/mtd/nand/raw/marvell_nand.c
+@@ -5,6 +5,73 @@
+  * Copyright (C) 2017 Marvell
+  * Author: Miquel RAYNAL <miquel.raynal@free-electrons.com>
+  *
++ *
++ * This NAND controller driver handles two versions of the hardware,
++ * one is called NFCv1 and is available on PXA SoCs and the other is
++ * called NFCv2 and is available on Armada SoCs.
++ *
++ * The main visible difference is that NFCv1 only has Hamming ECC
++ * capabilities, while NFCv2 also embeds a BCH ECC engine. Also, DMA
++ * is not used with NFCv2.
++ *
++ * The ECC layouts are depicted in details in Marvell AN-379, but here
++ * is a brief description.
++ *
++ * When using Hamming, the data is split in 512B chunks (either 1, 2
++ * or 4) and each chunk will have its own ECC "digest" of 6B at the
++ * beginning of the OOB area and eventually the remaining free OOB
++ * bytes (also called "spare" bytes in the driver). This engine
++ * corrects up to 1 bit per chunk and detects reliably an error if
++ * there are at most 2 bitflips. Here is the page layout used by the
++ * controller when Hamming is chosen:
++ *
++ * +-------------------------------------------------------------+
++ * | Data 1 | ... | Data N | ECC 1 | ... | ECCN | Free OOB bytes |
++ * +-------------------------------------------------------------+
++ *
++ * When using the BCH engine, there are N identical (data + free OOB +
++ * ECC) sections and potentially an extra one to deal with
++ * configurations where the chosen (data + free OOB + ECC) sizes do
++ * not align with the page (data + OOB) size. ECC bytes are always
++ * 30B per ECC chunk. Here is the page layout used by the controller
++ * when BCH is chosen:
++ *
++ * +-----------------------------------------
++ * | Data 1 | Free OOB bytes 1 | ECC 1 | ...
++ * +-----------------------------------------
++ *
++ *      -------------------------------------------
++ *       ... | Data N | Free OOB bytes N | ECC N |
++ *      -------------------------------------------
++ *
++ *           --------------------------------------------+
++ *            Last Data | Last Free OOB bytes | Last ECC |
++ *           --------------------------------------------+
++ *
++ * In both cases, the layout seen by the user is always: all data
++ * first, then all free OOB bytes and finally all ECC bytes. With BCH,
++ * ECC bytes are 30B long and are padded with 0xFF to align on 32
++ * bytes.
++ *
++ * The controller has certain limitations that are handled by the
++ * driver:
++ *   - It can only read 2k at a time. To overcome this limitation, the
++ *     driver issues data cycles on the bus, without issuing new
++ *     CMD + ADDR cycles. The Marvell term is "naked" operations.
++ *   - The ECC strength in BCH mode cannot be tuned. It is fixed 16
++ *     bits. What can be tuned is the ECC block size as long as it
++ *     stays between 512B and 2kiB. It's usually chosen based on the
++ *     chip ECC requirements. For instance, using 2kiB ECC chunks
++ *     provides 4b/512B correctability.
++ *   - The controller will always treat data bytes, free OOB bytes
++ *     and ECC bytes in that order, no matter what the real layout is
++ *     (which is usually all data then all OOB bytes). The
++ *     marvell_nfc_layouts array below contains the currently
++ *     supported layouts.
++ *   - Because of these weird layouts, the Bad Block Markers can be
++ *     located in data section. In this case, the NAND_BBT_NO_OOB_BBM
++ *     option must be set to prevent scanning/writing bad block
++ *     markers.
+  */
+ 
+ #include <linux/module.h>
+-- 
+2.7.4
+
diff --git a/patch/0112-mtd-rawnand-marvell-rework-BCH-engine-failure-path.patch b/patch/0112-mtd-rawnand-marvell-rework-BCH-engine-failure-path.patch
new file mode 100644
index 0000000..b23a23a
--- /dev/null
+++ b/patch/0112-mtd-rawnand-marvell-rework-BCH-engine-failure-path.patch
@@ -0,0 +1,125 @@
+From 9c632997705956e061729df72b0422951a9c921d Mon Sep 17 00:00:00 2001
+From: Miquel Raynal <miquel.raynal@bootlin.com>
+Date: Thu, 19 Jul 2018 16:54:23 +0200
+Subject: [PATCH] mtd: rawnand: marvell: rework BCH engine failure path
+
+We are about to support a new layout that triggers a faulty mechanism in
+BCH engine that creates bitflips in erased pages.
+
+Before adding the quirk that will workaround this issue, this patch just
+reworks a bit the section that handles ECC failures in BCH read path.
+
+Signed-off-by: Miquel Raynal <miquel.raynal@bootlin.com>
+Reviewed-by: Boris Brezillon <boris.brezillon@bootlin.com>
+---
+ drivers/mtd/nand/raw/marvell_nand.c | 73 +++++++++++++++++++++----------------
+ 1 file changed, 42 insertions(+), 31 deletions(-)
+
+diff --git a/drivers/mtd/nand/raw/marvell_nand.c b/drivers/mtd/nand/raw/marvell_nand.c
+index 29906c9..1720f6d 100644
+--- a/drivers/mtd/nand/raw/marvell_nand.c
++++ b/drivers/mtd/nand/raw/marvell_nand.c
+@@ -1301,11 +1301,11 @@ static int marvell_nfc_hw_ecc_bch_read_page(struct mtd_info *mtd,
+ 					    int page)
+ {
+ 	const struct marvell_hw_ecc_layout *lt = to_marvell_nand(chip)->layout;
+-	int data_len = lt->data_bytes, spare_len = lt->spare_bytes, ecc_len;
+-	u8 *data = buf, *spare = chip->oob_poi, *ecc;
++	int data_len = lt->data_bytes, spare_len = lt->spare_bytes;
++	u8 *data = buf, *spare = chip->oob_poi;
+ 	int max_bitflips = 0;
+ 	u32 failure_mask = 0;
+-	int chunk, ecc_offset_in_page, ret;
++	int chunk, ret;
+ 
+ 	/*
+ 	 * With BCH, OOB is not fully used (and thus not read entirely), not
+@@ -1346,46 +1346,57 @@ static int marvell_nfc_hw_ecc_bch_read_page(struct mtd_info *mtd,
+ 	 * the controller in normal mode and must be re-read in raw mode. To
+ 	 * avoid dropping the performances, we prefer not to include them. The
+ 	 * user should re-read the page in raw mode if ECC bytes are required.
++	 */
++
++	/*
++	 * In case there is any subpage read error reported by ->correct(), we
++	 * usually re-read only ECC bytes in raw mode and check if the whole
++	 * page is empty. In this case, it is normal that the ECC check failed
++	 * and we just ignore the error.
+ 	 *
+ 	 * However, for any subpage read error reported by ->correct(), the ECC
+ 	 * bytes must be read in raw mode and the full subpage must be checked
+ 	 * to see if it is entirely empty of if there was an actual error.
+ 	 */
+ 	for (chunk = 0; chunk < lt->nchunks; chunk++) {
++		int data_off_in_page, spare_off_in_page, ecc_off_in_page;
++		int data_off, spare_off, ecc_off;
++		int data_len, spare_len, ecc_len;
++
+ 		/* No failure reported for this chunk, move to the next one */
+ 		if (!(failure_mask & BIT(chunk)))
+ 			continue;
+ 
+-		/* Derive ECC bytes positions (in page/buffer) and length */
+-		ecc = chip->oob_poi +
+-			(lt->full_chunk_cnt * lt->spare_bytes) +
+-			lt->last_spare_bytes +
+-			(chunk * ALIGN(lt->ecc_bytes, 32));
+-		ecc_offset_in_page =
+-			(chunk * (lt->data_bytes + lt->spare_bytes +
+-				  lt->ecc_bytes)) +
+-			(chunk < lt->full_chunk_cnt ?
+-			 lt->data_bytes + lt->spare_bytes :
+-			 lt->last_data_bytes + lt->last_spare_bytes);
+-		ecc_len = chunk < lt->full_chunk_cnt ?
+-			lt->ecc_bytes : lt->last_ecc_bytes;
+-
+-		/* Do the actual raw read of the ECC bytes */
+-		nand_change_read_column_op(chip, ecc_offset_in_page,
+-					   ecc, ecc_len, false);
+-
+-		/* Derive data/spare bytes positions (in buffer) and length */
+-		data = buf + (chunk * lt->data_bytes);
+-		data_len = chunk < lt->full_chunk_cnt ?
+-			lt->data_bytes : lt->last_data_bytes;
+-		spare = chip->oob_poi + (chunk * (lt->spare_bytes +
+-						  lt->ecc_bytes));
+-		spare_len = chunk < lt->full_chunk_cnt ?
+-			lt->spare_bytes : lt->last_spare_bytes;
++		data_off_in_page = chunk * (lt->data_bytes + lt->spare_bytes +
++					    lt->ecc_bytes);
++		spare_off_in_page = data_off_in_page +
++			(chunk < lt->full_chunk_cnt ? lt->data_bytes :
++						      lt->last_data_bytes);
++		ecc_off_in_page = spare_off_in_page +
++			(chunk < lt->full_chunk_cnt ? lt->spare_bytes :
++						      lt->last_spare_bytes);
++
++		data_off = chunk * lt->data_bytes;
++		spare_off = chunk * lt->spare_bytes;
++		ecc_off = (lt->full_chunk_cnt * lt->spare_bytes) +
++			  lt->last_spare_bytes +
++			  (chunk * (lt->ecc_bytes + 2));
++
++		data_len = chunk < lt->full_chunk_cnt ? lt->data_bytes :
++							lt->last_data_bytes;
++		spare_len = chunk < lt->full_chunk_cnt ? lt->spare_bytes :
++							 lt->last_spare_bytes;
++		ecc_len = chunk < lt->full_chunk_cnt ? lt->ecc_bytes :
++						       lt->last_ecc_bytes;
++
++		nand_change_read_column_op(chip, ecc_off_in_page,
++					   chip->oob_poi + ecc_off, ecc_len,
++					   false);
+ 
+ 		/* Check the entire chunk (data + spare + ecc) for emptyness */
+-		marvell_nfc_check_empty_chunk(chip, data, data_len, spare,
+-					      spare_len, ecc, ecc_len,
++		marvell_nfc_check_empty_chunk(chip, buf + data_off, data_len,
++					      chip->oob_poi + spare_off, spare_len,
++					      chip->oob_poi + ecc_off, ecc_len,
+ 					      &max_bitflips);
+ 	}
+ 
+-- 
+2.7.4
+
diff --git a/patch/0113-mtd-rawnand-marvell-support-8b-512B-strength-for-2ki.patch b/patch/0113-mtd-rawnand-marvell-support-8b-512B-strength-for-2ki.patch
new file mode 100644
index 0000000..d6c0c08
--- /dev/null
+++ b/patch/0113-mtd-rawnand-marvell-support-8b-512B-strength-for-2ki.patch
@@ -0,0 +1,95 @@
+From e1ef177fc6d81a5f1e0c9a9c3e607cef467f8f92 Mon Sep 17 00:00:00 2001
+From: Miquel Raynal <miquel.raynal@bootlin.com>
+Date: Thu, 19 Jul 2018 12:21:19 +0200
+Subject: [PATCH] mtd: rawnand: marvell: support 8b/512B strength for 2kiB
+ pages layout
+
+Add support for the layout used by 2kiB page NAND chips requesting at
+least 8-bit of correction per 512 bytes. This layout requires a bit of
+handling as:
+1/ It can only fit if the NAND chip has at least 128 OOB bytes.
+2/ The Bad Block Markers are located in the middle of the data bytes
+   and shall not be used.
+3/ It has been experimentally observed that, for certain layouts, the ECC
+   engine tries to correct data while it should not because the errors
+   are uncorrectable. While this is harmless for truly bad pages, it
+   creates bitflips in empty pages. To avoid such scenario that
+   augments artificially the number of bitflips we re-read in raw mode
+   the entire page instead of just the ECC bytes. This is done only
+   for this layout to avoid an unneeded penalty with other setups.
+
+Signed-off-by: Miquel Raynal <miquel.raynal@bootlin.com>
+Reviewed-by: Boris Brezillon <boris.brezillon@bootlin.com>
+---
+ drivers/mtd/nand/raw/marvell_nand.c | 34 +++++++++++++++++++++++++++++++---
+ 1 file changed, 31 insertions(+), 3 deletions(-)
+
+diff --git a/drivers/mtd/nand/raw/marvell_nand.c b/drivers/mtd/nand/raw/marvell_nand.c
+index 1720f6d..6c16646 100644
+--- a/drivers/mtd/nand/raw/marvell_nand.c
++++ b/drivers/mtd/nand/raw/marvell_nand.c
+@@ -284,6 +284,7 @@ static const struct marvell_hw_ecc_layout marvell_nfc_layouts[] = {
+ 	MARVELL_LAYOUT(  512,   512,  1,  1,  1,  512,  8,  8,  0,  0,  0),
+ 	MARVELL_LAYOUT( 2048,   512,  1,  1,  1, 2048, 40, 24,  0,  0,  0),
+ 	MARVELL_LAYOUT( 2048,   512,  4,  1,  1, 2048, 32, 30,  0,  0,  0),
++	MARVELL_LAYOUT( 2048,   512,  8,  2,  1, 1024,  0, 30,1024,32, 30),
+ 	MARVELL_LAYOUT( 4096,   512,  4,  2,  2, 2048, 32, 30,  0,  0,  0),
+ 	MARVELL_LAYOUT( 4096,   512,  8,  5,  4, 1024,  0, 30,  0, 64, 30),
+ };
+@@ -1354,9 +1355,11 @@ static int marvell_nfc_hw_ecc_bch_read_page(struct mtd_info *mtd,
+ 	 * page is empty. In this case, it is normal that the ECC check failed
+ 	 * and we just ignore the error.
+ 	 *
+-	 * However, for any subpage read error reported by ->correct(), the ECC
+-	 * bytes must be read in raw mode and the full subpage must be checked
+-	 * to see if it is entirely empty of if there was an actual error.
++	 * However, it has been empirically observed that for some layouts (e.g
++	 * 2k page, 8b strength per 512B chunk), the controller tries to correct
++	 * bits and may create itself bitflips in the erased area. To overcome
++	 * this strange behavior, the whole page is re-read in raw mode, not
++	 * only the ECC bytes.
+ 	 */
+ 	for (chunk = 0; chunk < lt->nchunks; chunk++) {
+ 		int data_off_in_page, spare_off_in_page, ecc_off_in_page;
+@@ -1389,6 +1392,21 @@ static int marvell_nfc_hw_ecc_bch_read_page(struct mtd_info *mtd,
+ 		ecc_len = chunk < lt->full_chunk_cnt ? lt->ecc_bytes :
+ 						       lt->last_ecc_bytes;
+ 
++		/*
++		 * Only re-read the ECC bytes, unless we are using the 2k/8b
++		 * layout which is buggy in the sense that the ECC engine will
++		 * try to correct data bytes anyway, creating bitflips. In this
++		 * case, re-read the entire page.
++		 */
++		if (lt->writesize == 2048 && lt->strength == 8) {
++			nand_change_read_column_op(chip, data_off_in_page,
++						   buf + data_off, data_len,
++						   false);
++			nand_change_read_column_op(chip, spare_off_in_page,
++						   chip->oob_poi + spare_off, spare_len,
++						   false);
++		}
++
+ 		nand_change_read_column_op(chip, ecc_off_in_page,
+ 					   chip->oob_poi + ecc_off, ecc_len,
+ 					   false);
+@@ -2175,6 +2193,16 @@ static int marvell_nand_hw_ecc_ctrl_init(struct mtd_info *mtd,
+ 		return -ENOTSUPP;
+ 	}
+ 
++	/* Special care for the layout 2k/8-bit/512B  */
++	if (l->writesize == 2048 && l->strength == 8) {
++		if (mtd->oobsize < 128) {
++			dev_err(nfc->dev, "Requested layout needs at least 128 OOB bytes\n");
++			return -ENOTSUPP;
++		} else {
++			chip->bbt_options |= NAND_BBT_NO_OOB_BBM;
++		}
++	}
++
+ 	mtd_set_ooblayout(mtd, &marvell_nand_ooblayout_ops);
+ 	ecc->steps = l->nchunks;
+ 	ecc->size = l->data_bytes;
+-- 
+2.7.4
+
diff --git a/patch/0116-mtd-nand-marvell-add-support-for-2KB-8-bit-nand.patch b/patch/0116-mtd-nand-marvell-add-support-for-2KB-8-bit-nand.patch
new file mode 100644
index 0000000..ad366a3
--- /dev/null
+++ b/patch/0116-mtd-nand-marvell-add-support-for-2KB-8-bit-nand.patch
@@ -0,0 +1,30 @@
+From 07c0a9512d61ac9aafceec4aee64308bbdf5a55a Mon Sep 17 00:00:00 2001
+From: Konstantin Porotchkin <kostap@marvell.com>
+Date: Wed, 8 Aug 2018 16:54:44 +0300
+Subject: [PATCH] mtd: nand: marvell: add support for 2KB 8-bit nand
+
+Add support for NAND with 2KB page and ECC strength of 8-bit
+to the layout table of marvell_nand driver.
+Tested with Toshiba TC58NVG1S3HTA00
+
+Change-Id: I54e03dcd05a80c23a2b47c97752591f4072e5060
+Signed-off-by: Konstantin Porotchkin <kostap@marvell.com>
+---
+ drivers/mtd/nand/raw/marvell_nand.c | 1 +
+ 1 file changed, 1 insertion(+)
+
+diff --git a/drivers/mtd/nand/raw/marvell_nand.c b/drivers/mtd/nand/raw/marvell_nand.c
+index 6c16646..916dcd1 100644
+--- a/drivers/mtd/nand/raw/marvell_nand.c
++++ b/drivers/mtd/nand/raw/marvell_nand.c
+@@ -285,6 +285,7 @@ static const struct marvell_hw_ecc_layout marvell_nfc_layouts[] = {
+ 	MARVELL_LAYOUT( 2048,   512,  1,  1,  1, 2048, 40, 24,  0,  0,  0),
+ 	MARVELL_LAYOUT( 2048,   512,  4,  1,  1, 2048, 32, 30,  0,  0,  0),
+ 	MARVELL_LAYOUT( 2048,   512,  8,  2,  1, 1024,  0, 30,1024,32, 30),
++	MARVELL_LAYOUT( 2048,   512,  8,  2,  1, 1024,  0, 30,  1024, 64, 30),
+ 	MARVELL_LAYOUT( 4096,   512,  4,  2,  2, 2048, 32, 30,  0,  0,  0),
+ 	MARVELL_LAYOUT( 4096,   512,  8,  5,  4, 1024,  0, 30,  0, 64, 30),
+ };
+-- 
+2.7.4
+
diff --git a/patch/0117-mtd-nand-marvell-Add-support-for-8KB-page-4-and-8-bi.patch b/patch/0117-mtd-nand-marvell-Add-support-for-8KB-page-4-and-8-bi.patch
new file mode 100644
index 0000000..b3ad74b
--- /dev/null
+++ b/patch/0117-mtd-nand-marvell-Add-support-for-8KB-page-4-and-8-bi.patch
@@ -0,0 +1,30 @@
+From bc4ddadaea683838c64013947e83b1690d378d09 Mon Sep 17 00:00:00 2001
+From: Konstantin Porotchkin <kostap@marvell.com>
+Date: Thu, 16 Aug 2018 17:23:55 +0300
+Subject: [PATCH] mtd: nand: marvell: Add support for 8KB page 4 and 8 bit ECC
+
+Add support to nand devices with 8KB page, 4 and 8 bit ECC to
+Marvell NAND driver
+
+Change-Id: Ie75c83bc83f9c2d4664088e9f5e24159f36bdc69
+Signed-off-by: Konstantin Porotchkin <kostap@marvell.com>
+---
+ drivers/mtd/nand/raw/marvell_nand.c | 2 ++
+ 1 file changed, 2 insertions(+)
+
+diff --git a/drivers/mtd/nand/raw/marvell_nand.c b/drivers/mtd/nand/raw/marvell_nand.c
+index 916dcd1..3f5e918 100644
+--- a/drivers/mtd/nand/raw/marvell_nand.c
++++ b/drivers/mtd/nand/raw/marvell_nand.c
+@@ -288,6 +288,8 @@ static const struct marvell_hw_ecc_layout marvell_nfc_layouts[] = {
+ 	MARVELL_LAYOUT( 2048,   512,  8,  2,  1, 1024,  0, 30,  1024, 64, 30),
+ 	MARVELL_LAYOUT( 4096,   512,  4,  2,  2, 2048, 32, 30,  0,  0,  0),
+ 	MARVELL_LAYOUT( 4096,   512,  8,  5,  4, 1024,  0, 30,  0, 64, 30),
++	MARVELL_LAYOUT( 8192,   512,  4,  4,  4, 2048,  0, 30,  0,  0,  0),
++	MARVELL_LAYOUT( 8192,   512,  8,  9,  8, 1024,  0, 30,  0, 160, 30),
+ };
+ 
+ /**
+-- 
+2.7.4
+
diff --git a/patch/series b/patch/series
index dad09fe..b5a0d74 100755
--- a/patch/series
+++ b/patch/series
@@ -65,3 +65,11 @@ net-fix-skb-csum-update-in-inet_proto_csum_replace16.patch
 0012-Add-support-for-new-transceivers-types-QSFP-DD-and-Q.patch
 0013-watchdog-mlx-wdt-support-new-watchdog-type-with-long.patch
 
+0100-armhf-configs.patch
+0100-armhf-build_workaround.patch
+0110-mtd-rawnand-marvell-use-regmap_update_bits-for-sysco.patch
+0111-mtd-rawnand-marvell-document-a-bit-more-the-driver.patch
+0112-mtd-rawnand-marvell-rework-BCH-engine-failure-path.patch
+0113-mtd-rawnand-marvell-support-8b-512B-strength-for-2ki.patch
+0116-mtd-nand-marvell-add-support-for-2KB-8-bit-nand.patch
+0117-mtd-nand-marvell-Add-support-for-8KB-page-4-and-8-bi.patch
